_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{"0c6W":function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}));var c=n("LpSC"),r=n.n(c),a=n("iuBY"),s="https://arcane-shelf-33075.herokuapp.com",o=function(e){return r()("".concat(s,"/api/user/").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},i=function(e){return r()("".concat(s,"/api/user/profile"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},l=function(e,t){return r()("".concat(s,"/api/user/update"),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(e)},body:t}).then((function(e){return Object(a.d)(e),e.json()})).catch((function(e){return console.log(e)}))}},GGaf:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/update",function(){return n("j0R5")}])},j0R5:function(e,t,n){"use strict";n.r(t);var c=n("nKUr"),r=n("5Yp1"),a=n("yxxe"),s=n("rePB"),o=(n("YFqc"),n("q1tI")),i=(n("20a2"),n("iuBY")),l=n("0c6W");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=Object(o.useState)({username:"",name:"",email:"",about:"",password:"",error:!1,success:!1,loading:!1,photo:"",userData:""}),t=e[0],n=e[1],r=Object(i.c)("token"),a=t.username,u=t.name,d=t.email,m=t.about,b=t.password,p=t.error,h=t.success,f=t.loading,O=(t.photo,t.userData);Object(o.useEffect)((function(){Object(l.a)(r).then((function(e){e?e.error?n(j(j({},t),{},{error:e.error})):n(j(j({},t),{},{username:e.username,name:e.name,email:e.email,about:e.about})):console.log("no data profile update")}))}),[]);var x=function(e){return function(c){var r,a="photo"===e?c.target.files[0]:c.target.value,o=new FormData;o.set(e,a),n(j(j({},t),{},(r={},Object(s.a)(r,e,a),Object(s.a)(r,"userData",o),Object(s.a)(r,"error",!1),Object(s.a)(r,"success",!1),r)))}},g=function(e){e.preventDefault(),n(j(j({},t),{},{loading:!0})),Object(l.b)(r,O).then((function(e){e.error?n(j(j({},t),{},{error:e.error,success:!1,loading:!1})):Object(i.i)(e,(function(){n(j(j({},t),{},{username:e.username,name:e.name,email:e.email,about:e.about,password:"",success:!0,loading:!1}))}))}))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("img",{src:"".concat("https://arcane-shelf-33075.herokuapp.com/api","/user/photo/").concat(a),className:"img img-fluid img-thumbnail mb-3",style:{maxHeight:"auto",maxWidth:"100%"},alt:"user profile"})}),Object(c.jsxs)("div",{className:"col-md-8 mb-5",children:[Object(c.jsx)("div",{className:"alert alert-success",style:{display:h?"":"none"},children:"Profile updated"}),Object(c.jsx)("div",{className:"alert alert-danger",style:{display:p?"":"none"},children:p}),Object(c.jsx)("div",{className:"alert alert-info",style:{display:f?"":"none"},children:"Loading..."}),Object(c.jsxs)("form",{onSubmit:g,children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("label",{className:"btn btn-outline-primary",children:["Profile photo",Object(c.jsx)("input",{onChange:x("photo"),type:"file",accept:"image/*",hidden:!0})]})}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-muted",children:"Username"}),Object(c.jsx)("input",{onChange:x("username"),type:"text",value:a,className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-muted",children:"Name"}),Object(c.jsx)("input",{onChange:x("name"),type:"text",value:u,className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-muted",children:"Email"}),Object(c.jsx)("input",{onChange:x("email"),type:"text",value:d,className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-muted",children:"About"}),Object(c.jsx)("textarea",{onChange:x("about"),type:"text",value:m,className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"text-muted",children:"Password"}),Object(c.jsx)("input",{onChange:x("password"),type:"password",value:b,className:"form-control"})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})]})]})})})};t.default=function(){return Object(c.jsx)(r.a,{children:Object(c.jsx)(a.a,{children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsx)("div",{className:"row",children:Object(c.jsx)(d,{})})})})})}},yxxe:function(e,t,n){"use strict";var c=n("nKUr"),r=n("q1tI"),a=n("20a2"),s=n.n(a),o=n("iuBY");t.a=function(e){var t=e.children;return Object(r.useEffect)((function(){Object(o.e)()||s.a.push("/signin")}),[]),Object(c.jsx)(c.Fragment,{children:t})}}},[["GGaf",1,0,2,3]]]);