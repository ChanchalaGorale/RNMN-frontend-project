_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{AveT:function(e,t,r){"use strict";var c=r("nKUr"),n=r("KQm4"),s=r("rePB"),l=(r("YFqc"),r("q1tI")),a=r("20a2"),o=r("Vvt1"),i=r.n(o),b=r("iuBY"),j=r("abxw"),u=r("SMr6"),d=r("zycw"),O=(r("91UR"),r("//g3"));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=i()((function(){return Promise.all([r.e(0),r.e(11),r.e(6),r.e(12)]).then(r.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(a.withRouter)((function(e){var t=e.router,r=Object(l.useState)([]),a=r[0],o=r[1],i=Object(l.useState)([]),h=i[0],p=i[1],x=Object(l.useState)([]),g=x[0],v=x[1],y=Object(l.useState)([]),N=y[0],w=y[1],_=Object(l.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog"))),P=_[0],S=_[1],D=Object(l.useState)({error:"",sizeError:"",success:"",formData:"",title:"",hidePublishButton:!1}),E=D[0],k=D[1],C=E.error,Y=(E.sizeError,E.success),q=E.formData,B=E.title,z=(E.hidePublishButton,Object(b.c)("token"));Object(l.useEffect)((function(){k(m(m({},E),{},{formData:new FormData})),F(),I()}),[t]);var F=function(){Object(j.b)().then((function(e){e?e.error?k(m(m({},E),{},{error:e.error})):o(e):console.log("no data")}))},I=function(){Object(u.b)().then((function(e){e?(console.log(e),e.error?k(m(m({},E),{},{error:e.error})):p(e)):console.log("no data")}))},T=function(e){e.preventDefault(),Object(d.a)(q,z).then((function(e){e?e.error?k(m(m({},E),{},{error:e.error})):(k(m(m({},E),{},{title:"",error:"",success:'A new blog titled "'.concat(e.title,'" is created')})),S(""),o([]),p([])):console.log("no data recieved ")}))},U=function(e){return function(t){var r,c="photo"===e?t.target.files[0]:t.target.value;q.set(e,c),k(m(m({},E),{},(r={},Object(s.a)(r,e,c),Object(s.a)(r,"formData",q),Object(s.a)(r,"error",""),r)))}},J=function(e){S(e),q.set("body",e),localStorage.setItem("blog",JSON.stringify(e))},K=function(e){return function(){k(m(m({},E),{},{error:""}));var t=g.indexOf(e),r=Object(n.a)(g);-1===t?r.push(e):r.splice(t,1),console.log(r),v(r),q.set("categories",r)}},A=function(e){return function(){k(m(m({},E),{},{error:""}));var t=g.indexOf(e),r=Object(n.a)(N);-1===t?r.push(e):r.splice(t,1),console.log(r),w(r),q.set("tags",r)}};return Object(c.jsxs)("div",{className:"container-fluid pb-5 ",children:[Object(c.jsxs)("div",{className:"pt-3 ",children:[Object(c.jsx)("div",{className:"alert alert-danger",style:{display:C?"":"none"},children:C}),Object(c.jsx)("div",{className:"alert alert-success",style:{display:Y?"":"none"},children:Y})]}),Object(c.jsxs)("div",{className:"row pb-5 ",children:[Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsxs)("form",{onSubmit:T,children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{placeholder:"Blog title",type:"text",className:"form-control",value:B,onChange:U("title")})}),Object(c.jsx)("div",{className:"form-group quill__form__grp",children:Object(c.jsx)(f,{modules:O.b,formats:O.a,value:P,placeholder:"Write something amazing...",onChange:J})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg btn-block",children:"Publish"})})]})}),Object(c.jsxs)("div",{className:"col-md-4",children:[Object(c.jsxs)("div",{className:"form-group pb-2",children:[Object(c.jsx)("h5",{children:"Featured image"}),Object(c.jsx)("hr",{}),Object(c.jsx)("small",{className:"text-muted",children:"Max size: 1mb"}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{className:"btn btn-outline-primary",children:Object(c.jsx)("input",{onChange:U("photo"),type:"file",accept:"image/*",placeholder:"Upload featured image"})})]}),Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("h5",{children:"Categories"}),Object(c.jsx)("hr",{}),Object(c.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:a&&a.map((function(e,t){return Object(c.jsxs)("li",{className:"list-unstyled",children:[Object(c.jsx)("input",{onChange:K(e._id),type:"checkbox",className:"mr-2"}),Object(c.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]}),Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("h5",{children:"Tags"}),Object(c.jsx)("hr",{}),Object(c.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:h&&h.map((function(e,t){return Object(c.jsxs)("li",{className:"list-unstyled",children:[Object(c.jsx)("input",{onChange:A(e._id),type:"checkbox",className:"mr-2"}),Object(c.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]})]})]})]})]})}))},SD2O:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/crud/blog",function(){return r("bexL")}])},bexL:function(e,t,r){"use strict";r.r(t);var c=r("nKUr"),n=r("5Yp1"),s=r("yxxe"),l=r("AveT");r("YFqc");t.default=function(){return Object(c.jsx)(n.a,{children:Object(c.jsx)(s.a,{children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-12 pt-5 pb-5",children:Object(c.jsx)("h2",{children:"Create a new blog"})}),Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)(l.a,{})})]})})})})}},yxxe:function(e,t,r){"use strict";var c=r("nKUr"),n=r("q1tI"),s=r("20a2"),l=r.n(s),a=r("iuBY");t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(a.e)()||l.a.push("/signin")}),[]),Object(c.jsx)(c.Fragment,{children:t})}}},[["SD2O",1,0,2,3,8,9]]]);