_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{AveT:function(e,t,c){"use strict";var r=c("nKUr"),s=c("KQm4"),n=c("rePB"),a=(c("YFqc"),c("q1tI")),l=c("20a2"),o=c("Vvt1"),i=c.n(o),j=c("iuBY"),b=c("abxw"),u=c("SMr6"),d=c("zycw"),O=(c("91UR"),c("//g3"));function m(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,r)}return c}function h(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?m(Object(c),!0).forEach((function(t){Object(n.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):m(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var f=i()((function(){return Promise.all([c.e(0),c.e(11),c.e(6),c.e(12)]).then(c.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(l.withRouter)((function(e){var t=e.router,c=Object(a.useState)([]),l=c[0],o=c[1],i=Object(a.useState)([]),m=i[0],p=i[1],x=Object(a.useState)([]),g=x[0],v=x[1],N=Object(a.useState)([]),y=N[0],w=N[1],_=Object(a.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog"))),P=_[0],S=_[1],D=Object(a.useState)({error:"",sizeError:"",success:"",formData:"",title:"",hidePublishButton:!1}),E=D[0],k=D[1],C=E.error,U=(E.sizeError,E.success),q=E.formData,B=E.title,I=(E.hidePublishButton,Object(j.c)("token"));Object(a.useEffect)((function(){k(h(h({},E),{},{formData:new FormData})),Y(),Z()}),[t]);var Y=function(){Object(b.b)().then((function(e){e?e.error?k(h(h({},E),{},{error:e.error})):o(e):console.log("no data")}))},Z=function(){Object(u.b)().then((function(e){e?(console.log(e),e.error?k(h(h({},E),{},{error:e.error})):p(e)):console.log("no data")}))},z=function(e){e.preventDefault(),Object(d.a)(q,I).then((function(e){e?e.error?k(h(h({},E),{},{error:e.error})):(k(h(h({},E),{},{title:"",error:"",success:'A new blog titled "'.concat(e.title,'" is created')})),S(""),o([]),p([])):console.log("no data recieved ")}))},T=function(e){return function(t){var c,r="photo"===e?t.target.files[0]:t.target.value;q.set(e,r),k(h(h({},E),{},(c={},Object(n.a)(c,e,r),Object(n.a)(c,"formData",q),Object(n.a)(c,"error",""),c)))}},F=function(e){S(e),q.set("body",e),localStorage.setItem("blog",JSON.stringify(e))},J=function(e){return function(){k(h(h({},E),{},{error:""}));var t=g.indexOf(e),c=Object(s.a)(g);-1===t?c.push(e):c.splice(t,1),console.log(c),v(c),q.set("categories",c)}},K=function(e){return function(){k(h(h({},E),{},{error:""}));var t=g.indexOf(e),c=Object(s.a)(y);-1===t?c.push(e):c.splice(t,1),console.log(c),w(c),q.set("tags",c)}};return Object(r.jsxs)("div",{className:"container-fluid pb-5 ",children:[Object(r.jsxs)("div",{className:"pt-3 ",children:[Object(r.jsx)("div",{className:"alert alert-danger",style:{display:C?"":"none"},children:C}),Object(r.jsx)("div",{className:"alert alert-success",style:{display:U?"":"none"},children:U})]}),Object(r.jsxs)("div",{className:"row pb-5 ",children:[Object(r.jsx)("div",{className:"col-md-8",children:Object(r.jsxs)("form",{onSubmit:z,children:[Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{placeholder:"Blog title",type:"text",className:"form-control",value:B,onChange:T("title")})}),Object(r.jsx)("div",{className:"form-group quill__form__grp",children:Object(r.jsx)(f,{modules:O.b,formats:O.a,value:P,placeholder:"Write something amazing...",onChange:F})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",className:"btn btn-primary btn-lg btn-block",children:"Publish"})})]})}),Object(r.jsxs)("div",{className:"col-md-4",children:[Object(r.jsxs)("div",{className:"form-group pb-2",children:[Object(r.jsx)("h5",{children:"Featured image"}),Object(r.jsx)("hr",{}),Object(r.jsx)("small",{className:"text-muted",children:"Max size: 1mb"}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{className:"btn btn-outline-primary",children:Object(r.jsx)("input",{onChange:T("photo"),type:"file",accept:"image/*",placeholder:"Upload featured image"})})]}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(r.jsxs)("div",{className:"col-md-6",children:[Object(r.jsx)("h5",{children:"Categories"}),Object(r.jsx)("hr",{}),Object(r.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:l&&l.map((function(e,t){return Object(r.jsxs)("li",{className:"list-unstyled",children:[Object(r.jsx)("input",{onChange:J(e._id),type:"checkbox",className:"mr-2"}),Object(r.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]}),Object(r.jsxs)("div",{className:"col-md-6",children:[Object(r.jsx)("h5",{children:"Tags"}),Object(r.jsx)("hr",{}),Object(r.jsx)("ul",{style:{maxHeight:"200px",overflowY:"scroll"},children:m&&m.map((function(e,t){return Object(r.jsxs)("li",{className:"list-unstyled",children:[Object(r.jsx)("input",{onChange:K(e._id),type:"checkbox",className:"mr-2"}),Object(r.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))})]})]})]})]})]})}))},MUZa:function(e,t,c){"use strict";c.r(t);var r=c("nKUr"),s=(c("q1tI"),c("5Yp1")),n=c("vC6e"),a=c("AveT");t.default=function(){return Object(r.jsx)(s.a,{children:Object(r.jsx)(n.a,{children:Object(r.jsx)("div",{className:"container-fluid",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"col-md-12 pt-4 pb-2 ",children:Object(r.jsx)("h2",{className:"text-center",children:"Create a new blog"})}),Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"card",children:Object(r.jsx)(a.a,{})})})]})})})})}},eZ7Z:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/blog",function(){return c("MUZa")}])},vC6e:function(e,t,c){"use strict";var r=c("nKUr"),s=c("q1tI"),n=c("20a2"),a=c.n(n),l=c("iuBY");t.a=function(e){var t=e.children;return Object(s.useEffect)((function(){Object(l.e)()?1!==Object(l.e)().role&&a.a.push("/"):a.a.push("/signin")}),[]),Object(r.jsx)(r.Fragment,{children:t})}}},[["eZ7Z",1,0,2,3,8,9]]]);