{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/ProfileUpdate.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from \"next/link\";\nimport { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { getCookie, isAuth, updateUser } from \"../../actions/auth\";\nimport { getProfile, update } from \"../../actions/user\";\nimport { API } from \"../../config\";\n\nvar ProfileUpdate = function ProfileUpdate() {\n  _s();\n\n  var _useState = useState({\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    about: \"\",\n    password: \"\",\n    error: false,\n    success: false,\n    loading: false,\n    photo: \"\",\n    userData: \"\"\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var token = getCookie(\"token\");\n  var username = values.username,\n      name = values.name,\n      email = values.email,\n      about = values.about,\n      password = values.password,\n      error = values.error,\n      success = values.success,\n      loading = values.loading,\n      photo = values.photo,\n      userData = values.userData;\n\n  var init = function init() {\n    getProfile(token).then(function (data) {\n      if (data) {\n        if (data.error) {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            error: data.error\n          }));\n        } else {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about\n          }));\n        }\n      } else {\n        consl;\n      }\n    });\n  };\n\n  useEffect(function () {\n    init();\n  }, []);\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      // console.log(e.target.value);\n      var value = name === \"photo\" ? e.target.files[0] : e.target.value;\n      var userFormData = new FormData();\n      userFormData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"userData\", userFormData), _defineProperty(_objectSpread2, \"error\", false), _defineProperty(_objectSpread2, \"success\", false), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    update(token, userData).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          success: false,\n          loading: false\n        }));\n      } else {\n        updateUser(data, function () {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about,\n            password: \"\",\n            success: true,\n            loading: false\n          }));\n        });\n      }\n    });\n  };\n\n  var profileUpdateForm = function profileUpdateForm() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"btn btn-outline-info\",\n          children: [\"Profile photo\", /*#__PURE__*/_jsxDEV(\"input\", {\n            onChange: handleChange(\"photo\"),\n            type: \"file\",\n            accept: \"image/*\",\n            hidden: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange(\"username\"),\n          type: \"text\",\n          value: username,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange(\"name\"),\n          type: \"text\",\n          value: name,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange(\"email\"),\n          type: \"text\",\n          value: email,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"About\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          onChange: handleChange(\"about\"),\n          type: \"text\",\n          value: about,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-muted\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handleChange(\"password\"),\n          type: \"password\",\n          value: password,\n          className: \"form-control\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      children: \"Profile updated\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var showLoading = function showLoading() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info\",\n      style: {\n        display: loading ? \"\" : \"none\"\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"\".concat(API, \"/user/photo/\").concat(username),\n            className: \"img img-fluid img-thumbnail mb-3\",\n            style: {\n              maxHeight: \"auto\",\n              maxWidth: \"100%\"\n            },\n            alt: \"user profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 mb-5\",\n          children: [showSuccess(), showError(), showLoading(), profileUpdateForm()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n\n_s(ProfileUpdate, \"llVSgiIAGFl/CB/UqP1eiYp0RIA=\");\n\n_c = ProfileUpdate;\nexport default ProfileUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileUpdate\");","map":{"version":3,"sources":["/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/ProfileUpdate.js"],"names":["Link","useState","useEffect","Router","getCookie","isAuth","updateUser","getProfile","update","API","ProfileUpdate","username","name","email","about","password","error","success","loading","photo","userData","values","setValues","token","init","then","data","consl","handleChange","e","value","target","files","userFormData","FormData","set","handleSubmit","preventDefault","profileUpdateForm","showError","display","showSuccess","showLoading","maxHeight","maxWidth"],"mappings":"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","sourcesContent":["import Link from \"next/link\";\nimport { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { getCookie, isAuth, updateUser } from \"../../actions/auth\";\nimport { getProfile, update } from \"../../actions/user\";\nimport { API } from \"../../config\";\n\nconst ProfileUpdate = () => {\n  const [values, setValues] = useState({\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    about: \"\",\n    password: \"\",\n    error: false,\n    success: false,\n    loading: false,\n    photo: \"\",\n    userData: \"\",\n  });\n\n  const token = getCookie(\"token\");\n  const {\n    username,\n    name,\n    email,\n    about,\n    password,\n    error,\n    success,\n    loading,\n    photo,\n    userData,\n  } = values;\n\n  const init = () => {\n    getProfile(token).then((data) => {\n      if(data){\n        if (data.error) {\n        setValues({ ...values, error: data.error });\n      } else {\n        setValues({\n          ...values,\n          username: data.username,\n          name: data.name,\n          email: data.email,\n          about: data.about,\n        });\n      }\n      }else{\n        consl\n      }\n      \n    });\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const handleChange = (name) => (e) => {\n    // console.log(e.target.value);\n    const value = name === \"photo\" ? e.target.files[0] : e.target.value;\n    let userFormData = new FormData();\n    userFormData.set(name, value);\n    setValues({\n      ...values,\n      [name]: value,\n      userData: userFormData,\n      error: false,\n      success: false,\n    });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setValues({ ...values, loading: true });\n    update(token, userData).then((data) => {\n      if (data.error) {\n        setValues({\n          ...values,\n          error: data.error,\n          success: false,\n          loading: false,\n        });\n      } else {\n        updateUser(data, () => {\n          setValues({\n            ...values,\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about,\n            password: \"\",\n            success: true,\n            loading: false,\n          });\n        });\n      }\n    });\n  };\n\n  const profileUpdateForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <label className=\"btn btn-outline-info\">\n          Profile photo\n          <input\n            onChange={handleChange(\"photo\")}\n            type=\"file\"\n            accept=\"image/*\"\n            hidden\n          />\n        </label>\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Username</label>\n        <input\n          onChange={handleChange(\"username\")}\n          type=\"text\"\n          value={username}\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Name</label>\n        <input\n          onChange={handleChange(\"name\")}\n          type=\"text\"\n          value={name}\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Email</label>\n        <input\n          onChange={handleChange(\"email\")}\n          type=\"text\"\n          value={email}\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">About</label>\n        <textarea\n          onChange={handleChange(\"about\")}\n          type=\"text\"\n          value={about}\n          className=\"form-control\"\n        />\n      </div>\n      <div className=\"form-group\">\n        <label className=\"text-muted\">Password</label>\n        <input\n          onChange={handleChange(\"password\")}\n          type=\"password\"\n          value={password}\n          className=\"form-control\"\n        />\n      </div>\n      <div>\n        <button type=\"submit\" className=\"btn btn-primary\">\n          Submit\n        </button>\n      </div>\n    </form>\n  );\n\n  const showError = () => (\n    <div\n      className=\"alert alert-danger\"\n      style={{ display: error ? \"\" : \"none\" }}\n    >\n      {error}\n    </div>\n  );\n\n  const showSuccess = () => (\n    <div\n      className=\"alert alert-success\"\n      style={{ display: success ? \"\" : \"none\" }}\n    >\n      Profile updated\n    </div>\n  );\n\n  const showLoading = () => (\n    <div\n      className=\"alert alert-info\"\n      style={{ display: loading ? \"\" : \"none\" }}\n    >\n      Loading...\n    </div>\n  );\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <img\n              src={`${API}/user/photo/${username}`}\n              className=\"img img-fluid img-thumbnail mb-3\"\n              style={{ maxHeight: \"auto\", maxWidth: \"100%\" }}\n              alt=\"user profile\"\n            />\n          </div>\n          <div className=\"col-md-8 mb-5\">\n            {showSuccess()}\n            {showError()}\n            {showLoading()}\n            {profileUpdateForm()}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProfileUpdate;\n"]},"metadata":{},"sourceType":"module"}