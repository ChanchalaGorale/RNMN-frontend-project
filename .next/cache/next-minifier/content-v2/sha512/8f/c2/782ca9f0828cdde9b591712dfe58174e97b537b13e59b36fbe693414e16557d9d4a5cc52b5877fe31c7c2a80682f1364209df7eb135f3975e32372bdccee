{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{DB6d:function(e,r,t){\"use strict\";t.r(r);var n=t(\"nKUr\"),a=t(\"q1tI\"),c=t(\"5Yp1\"),s=t(\"20a2\"),o=t.n(s),i=t(\"rePB\"),l=t(\"iuBY\"),j=t(\"YFqc\"),d=t.n(j);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){Object(i.a)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var p=function(){var e=Object(a.useState)({email:\"chanchala@gmail.com\",password:\"Chanchala\",error:\"\",loading:!1,message:\"\",showForm:!0}),r=e[0],t=e[1],c=r.email,s=r.password,j=r.error,b=r.loading,p=r.message,O=r.showForm;Object(a.useEffect)((function(){Object(l.e)()&&o.a.push(\"/\")}),[]);var h=function(e){e.preventDefault(),t(u(u({},r),{},{loading:!0,error:!1}));var n={email:c,password:s};Object(l.f)(n).then((function(e){e?e.error?t(u(u({},r),{},{error:e.error,loading:!1})):Object(l.a)(e,(function(){Object(l.e)()&&1===Object(l.e)().role?o.a.push(\"/admin\"):o.a.push(\"/user\")})):console.log(\"no data recieved \")}))},m=function(e){return function(n){t(u(u({},r),{},Object(i.a)({error:!1},e,n.target.value)))}};return Object(n.jsxs)(n.Fragment,{children:[j?Object(n.jsx)(\"div\",{className:\"alert alert-danger\",children:j}):\"\",b?Object(n.jsx)(\"div\",{className:\"alert alert-info\",children:\"Loading...\"}):\"\",p?Object(n.jsx)(\"div\",{className:\"alert alert-info\",children:p}):\"\",O&&Object(n.jsxs)(\"form\",{onSubmit:h,children:[Object(n.jsx)(\"div\",{className:\"form-group\",children:Object(n.jsx)(\"input\",{value:c,onChange:m(\"email\"),type:\"email\",className:\"form-control\",placeholder:\"Type your email\"})}),Object(n.jsx)(\"div\",{className:\"form-group\",children:Object(n.jsx)(\"input\",{value:s,onChange:m(\"password\"),type:\"password\",className:\"form-control\",placeholder:\"Type your password\"})}),Object(n.jsx)(\"div\",{children:Object(n.jsx)(\"button\",{className:\"btn btn-primary\",children:\"Signin\"})})]}),Object(n.jsx)(\"br\",{}),Object(n.jsx)(d.a,{href:\"/auth/password/forgot\",children:Object(n.jsx)(\"a\",{className:\"btn btn-outline-primary \",children:\"Forgot password\"})})]})};r.default=Object(s.withRouter)((function(e){var r=e.router;return Object(n.jsx)(c.a,{children:Object(n.jsxs)(\"div\",{style:{textAlign:\"center\",maxWidth:\"600px\",marginLeft:\"auto\",marginRight:\"auto\",padding:\"20px\"},children:[Object(n.jsx)(\"h2\",{children:\"Signin\"}),Object(n.jsxs)(\"div\",{children:[Object(n.jsx)(\"div\",{style:{padding:\"20px\"},children:Object(n.jsx)(p,{})}),Object(n.jsx)(\"br\",{}),Object(n.jsx)(\"div\",{className:\"row\",children:Object(n.jsx)(\"div\",{className:\"col-md-6 offset-md-3\",children:r.query.message?Object(n.jsx)(\"div\",{className:\"alert alert-danger\",children:r.query.message}):void 0})})]})]})})}))},hMb1:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return t(\"DB6d\")}])}},[[\"hMb1\",1,0,2,3]]]);","map":{"version":3,"sources":["static/chunks/pages/signin-fe5d05c09d54fa69f512.js"],"names":["_N_E","window","push","DB6d","module","__webpack_exports__","__webpack_require__","r","jsx_runtime","react","Layout","next_router","router_default","n","defineProperty","auth","next_link","link_default","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","auth_SigninComponent","_useState","email","password","error","loading","message","showForm","values","setValues","a","handleSubmit","e","preventDefault","user","then","data","role","console","log","handleChange","name","value","children","className","onSubmit","onChange","type","placeholder","href","_ref","router","style","textAlign","maxWidth","marginLeft","marginRight","padding","query","hMb1","exports","__NEXT_P"],"mappings":"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"},"name":"static/chunks/pages/signin-fe5d05c09d54fa69f512.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[27],{\n\n/***/ \"DB6d\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./components/Layout.js + 11 modules\nvar Layout = __webpack_require__(\"5Yp1\");\n\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar next_router = __webpack_require__(\"20a2\");\nvar router_default = /*#__PURE__*/__webpack_require__.n(next_router);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"rePB\");\n\n// EXTERNAL MODULE: ./actions/auth.js\nvar auth = __webpack_require__(\"iuBY\");\n\n// EXTERNAL MODULE: ./node_modules/next/link.js\nvar next_link = __webpack_require__(\"YFqc\");\nvar link_default = /*#__PURE__*/__webpack_require__.n(next_link);\n\n// CONCATENATED MODULE: ./components/auth/SigninComponent.js\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\nvar SigninComponent_SigninComponent = function SigninComponent() {\n  var _useState = Object(react[\"useState\"])({\n    email: \"chanchala@gmail.com\",\n    password: \"Chanchala\",\n    error: \"\",\n    loading: false,\n    message: \"\",\n    showForm: true\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var email = values.email,\n      password = values.password,\n      error = values.error,\n      loading = values.loading,\n      message = values.message,\n      showForm = values.showForm;\n  Object(react[\"useEffect\"])(function () {\n    Object(auth[\"e\" /* isAuth */])() && router_default.a.push(\"/\");\n  }, []);\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault(); // console.table({ name, email, password, error, loading, message, showForm });\n\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true,\n      error: false\n    }));\n    var user = {\n      email: email,\n      password: password\n    };\n    Object(auth[\"f\" /* signin */])(user).then(function (data) {\n      if (data) {\n        if (data.error) {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            error: data.error,\n            loading: false\n          }));\n        } else {\n          // save user token to cookie\n          // save user info to localstorage\n          // authenticate user\n          Object(auth[\"a\" /* authenticate */])(data, function () {\n            if (Object(auth[\"e\" /* isAuth */])() && Object(auth[\"e\" /* isAuth */])().role === 1) {\n              router_default.a.push(\"/admin\");\n            } else {\n              router_default.a.push(\"/user\");\n            }\n          });\n        }\n      } else {\n        console.log(\"no data recieved \");\n      }\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      setValues(_objectSpread(_objectSpread({}, values), {}, Object(defineProperty[\"a\" /* default */])({\n        error: false\n      }, name, e.target.value)));\n    };\n  };\n\n  var showLoading = function showLoading() {\n    return loading ? /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-info\",\n      children: \"Loading...\"\n    }) : \"\";\n  };\n\n  var showError = function showError() {\n    return error ? /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }) : \"\";\n  };\n\n  var showMessage = function showMessage() {\n    return message ? /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-info\",\n      children: message\n    }) : \"\";\n  };\n\n  var signinForm = function signinForm() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          value: email,\n          onChange: handleChange(\"email\"),\n          type: \"email\",\n          className: \"form-control\",\n          placeholder: \"Type your email\"\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          value: password,\n          onChange: handleChange(\"password\"),\n          type: \"password\",\n          className: \"form-control\",\n          placeholder: \"Type your password\"\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n          className: \"btn btn-primary\",\n          children: \"Signin\"\n        })\n      })]\n    });\n  };\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"], {\n    children: [showError(), showLoading(), showMessage(), showForm && signinForm(), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\", {}), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(link_default.a, {\n      href: \"/auth/password/forgot\",\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n        className: \"btn btn-outline-primary \",\n        children: \"Forgot password\"\n      })\n    })]\n  });\n};\n\n/* harmony default export */ var auth_SigninComponent = (SigninComponent_SigninComponent);\n// CONCATENATED MODULE: ./pages/signin.js\n\n\n\n\n\n\n\nfunction signin(_ref) {\n  var router = _ref.router;\n\n  var showRedirectMessage = function showRedirectMessage() {\n    if (router.query.message) {\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"alert alert-danger\",\n        children: router.query.message\n      });\n    } else {\n      return;\n    }\n  };\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Layout[\"a\" /* default */], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n      style: {\n        textAlign: \"center\",\n        maxWidth: \"600px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        padding: \"20px\"\n      },\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\", {\n        children: \"Signin\"\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          style: {\n            padding: \"20px\"\n          },\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_SigninComponent, {})\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"br\", {}), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n            className: \"col-md-6 offset-md-3\",\n            children: showRedirectMessage()\n          })\n        })]\n      })]\n    })\n  });\n}\n\n/* harmony default export */ var pages_signin = __webpack_exports__[\"default\"] = (Object(next_router[\"withRouter\"])(signin));\n\n/***/ }),\n\n/***/ \"hMb1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/signin\",\n        function () {\n          return __webpack_require__(\"DB6d\");\n        }\n      ]);\n    \n\n/***/ })\n\n},[[\"hMb1\",1,0,2,3]]]);","inputSourceMap":{"version":3,"sources":["/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/SigninComponent.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/pages/signin.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fsignin&absolutePagePath=private-next-pages%2Fsignin.js!"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { signin, authenticate, isAuth } from \"../../actions/auth\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nvar SigninComponent = function SigninComponent() {\n  var _useState = useState({\n    email: \"chanchala@gmail.com\",\n    password: \"Chanchala\",\n    error: \"\",\n    loading: false,\n    message: \"\",\n    showForm: true\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var email = values.email,\n      password = values.password,\n      error = values.error,\n      loading = values.loading,\n      message = values.message,\n      showForm = values.showForm;\n  useEffect(function () {\n    isAuth() && Router.push(\"/\");\n  }, []);\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault(); // console.table({ name, email, password, error, loading, message, showForm });\n\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true,\n      error: false\n    }));\n    var user = {\n      email: email,\n      password: password\n    };\n    signin(user).then(function (data) {\n      if (data) {\n        if (data.error) {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            error: data.error,\n            loading: false\n          }));\n        } else {\n          // save user token to cookie\n          // save user info to localstorage\n          // authenticate user\n          authenticate(data, function () {\n            if (isAuth() && isAuth().role === 1) {\n              Router.push(\"/admin\");\n            } else {\n              Router.push(\"/user\");\n            }\n          });\n        }\n      } else {\n        console.log(\"no data recieved \");\n      }\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      setValues(_objectSpread(_objectSpread({}, values), {}, _defineProperty({\n        error: false\n      }, name, e.target.value)));\n    };\n  };\n\n  var showLoading = function showLoading() {\n    return loading ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-info\",\n      children: \"Loading...\"\n    }) : \"\";\n  };\n\n  var showError = function showError() {\n    return error ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }) : \"\";\n  };\n\n  var showMessage = function showMessage() {\n    return message ? /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-info\",\n      children: message\n    }) : \"\";\n  };\n\n  var signinForm = function signinForm() {\n    return /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsx(\"input\", {\n          value: email,\n          onChange: handleChange(\"email\"),\n          type: \"email\",\n          className: \"form-control\",\n          placeholder: \"Type your email\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsx(\"input\", {\n          value: password,\n          onChange: handleChange(\"password\"),\n          type: \"password\",\n          className: \"form-control\",\n          placeholder: \"Type your password\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-primary\",\n          children: \"Signin\"\n        })\n      })]\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [showError(), showLoading(), showMessage(), showForm && signinForm(), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Link, {\n      href: \"/auth/password/forgot\",\n      children: /*#__PURE__*/_jsx(\"a\", {\n        className: \"btn btn-outline-primary \",\n        children: \"Forgot password\"\n      })\n    })]\n  });\n};\n\nexport default SigninComponent;","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport Layout from \"../components/Layout\";\nimport { withRouter } from \"next/router\";\nimport SigninComponent from \"../components/auth/SigninComponent\";\n\nfunction signin(_ref) {\n  var router = _ref.router;\n\n  var showRedirectMessage = function showRedirectMessage() {\n    if (router.query.message) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: \"alert alert-danger\",\n        children: router.query.message\n      });\n    } else {\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      style: {\n        textAlign: \"center\",\n        maxWidth: \"600px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        padding: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"Signin\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          style: {\n            padding: \"20px\"\n          },\n          children: /*#__PURE__*/_jsx(SigninComponent, {})\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-6 offset-md-3\",\n            children: showRedirectMessage()\n          })\n        })]\n      })]\n    })\n  });\n}\n\nexport default withRouter(signin);","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/signin\",\n        function () {\n          return require(\"private-next-pages/signin.js\");\n        }\n      ]);\n    "]}}