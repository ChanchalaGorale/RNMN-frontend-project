{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[33],{N65x:function(e,n,c){\"use strict\";c.r(n);var t=c(\"nKUr\"),r=c(\"5Yp1\"),s=c(\"yxxe\"),a=c(\"nVAt\"),i=(c(\"YFqc\"),c(\"iuBY\"));n.default=function(){var e=Object(i.e)()&&Object(i.e)().username;return Object(t.jsx)(r.a,{children:Object(t.jsx)(s.a,{children:Object(t.jsx)(\"div\",{className:\"container\",children:Object(t.jsxs)(\"div\",{className:\"row\",children:[Object(t.jsx)(\"div\",{className:\"col-md-12 pt-5 pb-5\",children:Object(t.jsx)(\"h2\",{children:\"Manage blogs\"})}),Object(t.jsx)(\"div\",{className:\"col-md-12\",children:Object(t.jsx)(a.a,{username:e})})]})})})})}},SCLT:function(e,n,c){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/crud/blogs\",function(){return c(\"N65x\")}])},nVAt:function(e,n,c){\"use strict\";var t=c(\"nKUr\"),r=c(\"YFqc\"),s=c.n(r),a=c(\"q1tI\"),i=(c(\"20a2\"),c(\"iuBY\")),o=c(\"zycw\"),l=c(\"wd/R\"),u=c.n(l);n.a=function(e){var n=e.username,c=Object(a.useState)([]),r=c[0],l=c[1],j=Object(a.useState)(\"\"),b=j[0],d=j[1],O=Object(i.c)(\"token\");Object(a.useEffect)((function(){m()}),[]);var m=function(){Object(o.b)(n).then((function(e){e.error?console.log(e.error):l(e)}))},h=function(e){window.confirm(\"Are you sure you want to delete your blog?\")&&function(e){Object(o.f)(e,O).then((function(e){e.error?console.log(e.error):(d(e.message),m())}))}(e)},f=function(e){return Object(i.e)()&&0===Object(i.e)().role?Object(t.jsx)(s.a,{href:\"/user/crud/\".concat(e.slug),children:Object(t.jsx)(\"a\",{className:\"ml-2 btn btn-sm btn-warning\",children:\"Update\"})}):Object(i.e)()&&1===Object(i.e)().role?Object(t.jsx)(s.a,{href:\"/admin/crud/\".concat(e.slug),children:Object(t.jsx)(\"a\",{className:\"ml-2 btn btn-sm btn-warning\",children:\"Update\"})}):void 0};return Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(\"div\",{className:\"row\",children:Object(t.jsxs)(\"div\",{className:\"col-md-12\",children:[b&&Object(t.jsx)(\"div\",{className:\"alert alert-warning\",children:b}),r.map((function(e,n){return Object(t.jsxs)(\"div\",{className:\"pb-5\",children:[Object(t.jsx)(\"h3\",{children:e.title}),Object(t.jsxs)(\"p\",{className:\"mark\",children:[\"Written by \",e.postedBy.name,\" | Published on\",\" \",u()(e.updatedAt).fromNow()]}),Object(t.jsx)(\"button\",{className:\"btn btn-sm btn-danger\",onClick:function(){return h(e.slug)},children:\"Delete\"}),f(e)]},n)}))]})})})}},yxxe:function(e,n,c){\"use strict\";var t=c(\"nKUr\"),r=c(\"q1tI\"),s=c(\"20a2\"),a=c.n(s),i=c(\"iuBY\");n.a=function(e){var n=e.children;return Object(r.useEffect)((function(){Object(i.e)()||a.a.push(\"/signin\")}),[]),Object(t.jsx)(t.Fragment,{children:n})}}},[[\"SCLT\",1,0,4,2,3,5]]]);","map":{"version":3,"sources":["static/chunks/pages/user/crud/blogs-2c0ad3aa89717d366dec.js"],"names":["_N_E","window","push","N65x","module","__webpack_exports__","__webpack_require__","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_components_Layout__WEBPACK_IMPORTED_MODULE_1__","_components_auth_Private__WEBPACK_IMPORTED_MODULE_2__","_components_crud_BlogRead__WEBPACK_IMPORTED_MODULE_3__","_actions_auth__WEBPACK_IMPORTED_MODULE_5__","username","Object","children","className","SCLT","exports","__NEXT_P","nVAt","next_link__WEBPACK_IMPORTED_MODULE_1__","next_link__WEBPACK_IMPORTED_MODULE_1___default","n","react__WEBPACK_IMPORTED_MODULE_2__","_actions_auth__WEBPACK_IMPORTED_MODULE_4__","_actions_blog__WEBPACK_IMPORTED_MODULE_5__","moment__WEBPACK_IMPORTED_MODULE_6__","moment__WEBPACK_IMPORTED_MODULE_6___default","_ref","_useState","blogs","setBlogs","_useState2","message","setMessage","token","loadBlogs","then","data","error","console","log","deleteConfirm","slug","confirm","deleteBlog","showUpdateButton","blog","role","a","href","concat","map","i","title","postedBy","name","updatedAt","fromNow","onClick","yxxe","react__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_2__","next_router__WEBPACK_IMPORTED_MODULE_2___default","_actions_auth__WEBPACK_IMPORTED_MODULE_3__"],"mappings":"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"},"name":"static/chunks/pages/user/crud/blogs-2c0ad3aa89717d366dec.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[33],{\n\n/***/ \"N65x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"5Yp1\");\n/* harmony import */ var _components_auth_Private__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"yxxe\");\n/* harmony import */ var _components_crud_BlogRead__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"nVAt\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"iuBY\");\n\n\n\n\n\n\n\n\nvar Blog = function Blog() {\n  var username = Object(_actions_auth__WEBPACK_IMPORTED_MODULE_5__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_5__[/* isAuth */ \"e\"])().username;\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Layout__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_auth_Private__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"col-md-12 pt-5 pb-5\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h2\", {\n              children: \"Manage blogs\"\n            })\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_crud_BlogRead__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n              username: username\n            })\n          })]\n        })\n      })\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Blog);\n\n/***/ }),\n\n/***/ \"SCLT\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/user/crud/blogs\",\n        function () {\n          return __webpack_require__(\"N65x\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"nVAt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"iuBY\");\n/* harmony import */ var _actions_blog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"zycw\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"wd/R\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\n\n\nvar BlogRead = function BlogRead(_ref) {\n  var username = _ref.username;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])([]),\n      blogs = _useState[0],\n      setBlogs = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(\"\"),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* getCookie */ \"c\"])(\"token\");\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    loadBlogs();\n  }, []);\n\n  var loadBlogs = function loadBlogs() {\n    Object(_actions_blog__WEBPACK_IMPORTED_MODULE_5__[/* list */ \"b\"])(username).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setBlogs(data);\n      }\n    });\n  };\n\n  var deleteBlog = function deleteBlog(slug) {\n    Object(_actions_blog__WEBPACK_IMPORTED_MODULE_5__[/* removeBlog */ \"f\"])(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage(data.message);\n        loadBlogs();\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug) {\n    var answer = window.confirm(\"Are you sure you want to delete your blog?\");\n\n    if (answer) {\n      deleteBlog(slug);\n    }\n  };\n\n  var showUpdateButton = function showUpdateButton(blog) {\n    if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])().role === 0) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_link__WEBPACK_IMPORTED_MODULE_1___default.a, {\n        href: \"/user/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    } else if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])().role === 1) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_link__WEBPACK_IMPORTED_MODULE_1___default.a, {\n        href: \"/admin/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    }\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"pb-5\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h3\", {\n          children: blog.title\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"p\", {\n          className: \"mark\",\n          children: [\"Written by \", blog.postedBy.name, \" | Published on\", \" \", moment__WEBPACK_IMPORTED_MODULE_6___default()(blog.updatedAt).fromNow()]\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n          className: \"btn btn-sm btn-danger\",\n          onClick: function onClick() {\n            return deleteConfirm(blog.slug);\n          },\n          children: \"Delete\"\n        }), showUpdateButton(blog)]\n      }, i);\n    });\n  };\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"col-md-12\",\n        children: [message && /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n          className: \"alert alert-warning\",\n          children: message\n        }), showAllBlogs()]\n      })\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BlogRead);\n\n/***/ }),\n\n/***/ \"yxxe\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"iuBY\");\n\n\n\n\n\n\nfunction Private(_ref) {\n  var children = _ref.children;\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!Object(_actions_auth__WEBPACK_IMPORTED_MODULE_3__[/* isAuth */ \"e\"])()) {\n      next_router__WEBPACK_IMPORTED_MODULE_2___default.a.push(\"/signin\");\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: children\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Private);\n\n/***/ })\n\n},[[\"SCLT\",1,0,4,2,3,5]]]);","inputSourceMap":{"version":3,"sources":["/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/pages/user/crud/blogs.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fuser%2Fcrud%2Fblogs&absolutePagePath=private-next-pages%2Fuser%2Fcrud%2Fblogs.js!","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/crud/BlogRead.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/Private.js"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACF;AACA;AACO;AACE;AAC5B;AACkB;;AAE/C;AACA,iBAAiB,oEAAM,MAAM,oEAAM;AACnC,sBAAsB,6DAAI,CAAC,kEAAM;AACjC,2BAA2B,6DAAI,CAAC,wEAAO;AACvC,6BAA6B,6DAAI;AACjC;AACA,+BAA+B,8DAAK;AACpC;AACA,kCAAkC,6DAAI;AACtC;AACA,mCAAmC,6DAAI;AACvC;AACA,aAAa;AACb,WAAW,gBAAgB,6DAAI;AAC/B;AACA,mCAAmC,6DAAI,CAAC,yEAAQ;AAChD;AACA,aAAa;AACb,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,mEAAI,E;;;;;;;;AChCnB;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAuC;AAChE;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACR;AACF;AACnB;AACe;AACX;AACsB;AACD;AAC1B;;AAE5B;AACA;;AAEA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA,cAAc,uEAAS;AACvB,EAAE,uDAAS;AACX;AACA,GAAG;;AAEH;AACA,IAAI,kEAAI;AACR;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;AACA,IAAI,wEAAU;AACd;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,oEAAM,MAAM,oEAAM;AAC1B,0BAA0B,6DAAI,CAAC,gDAAI;AACnC;AACA,+BAA+B,6DAAI;AACnC;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK,UAAU,oEAAM,MAAM,oEAAM;AACjC,0BAA0B,6DAAI,CAAC,gDAAI;AACnC;AACA,+BAA+B,6DAAI;AACnC;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA,0BAA0B,8DAAK;AAC/B;AACA,gCAAgC,6DAAI;AACpC;AACA,SAAS,gBAAgB,8DAAK;AAC9B;AACA,gFAAgF,6CAAM;AACtF,SAAS,gBAAgB,6DAAI;AAC7B;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA,sBAAsB,6DAAI,CAAC,0DAAS;AACpC,2BAA2B,6DAAI;AAC/B;AACA,6BAA6B,8DAAK;AAClC;AACA,2CAA2C,6DAAI;AAC/C;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,iEAAQ,E;;;;;;;;AC7GvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACU;AACjB;AACR;AACW;;AAE5C;AACA;AACA,EAAE,uDAAS;AACX,SAAS,oEAAM;AACf,MAAM,kDAAM;AACZ;AACA,GAAG;AACH,sBAAsB,6DAAI,CAAC,0DAAS;AACpC;AACA,GAAG;AACH;;AAEe,gEAAO,E","file":"x","sourcesContent":["import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../../../components/Layout\";\nimport Private from \"../../../components/auth/Private\";\nimport BlogRead from \"../../../components/crud/BlogRead\";\nimport Link from \"next/link\";\nimport { isAuth } from \"../../../actions/auth\";\n\nvar Blog = function Blog() {\n  var username = isAuth() && isAuth().username;\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Private, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-12 pt-5 pb-5\",\n            children: /*#__PURE__*/_jsx(\"h2\", {\n              children: \"Manage blogs\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/_jsx(BlogRead, {\n              username: username\n            })\n          })]\n        })\n      })\n    })\n  });\n};\n\nexport default Blog;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/user/crud/blogs\",\n        function () {\n          return require(\"private-next-pages/user/crud/blogs.js\");\n        }\n      ]);\n    ","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Link from \"next/link\";\nimport { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { getCookie, isAuth } from \"../../actions/auth\";\nimport { list, removeBlog } from \"../../actions/blog\";\nimport moment from \"moment\";\n\nvar BlogRead = function BlogRead(_ref) {\n  var username = _ref.username;\n\n  var _useState = useState([]),\n      blogs = _useState[0],\n      setBlogs = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = getCookie(\"token\");\n  useEffect(function () {\n    loadBlogs();\n  }, []);\n\n  var loadBlogs = function loadBlogs() {\n    list(username).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setBlogs(data);\n      }\n    });\n  };\n\n  var deleteBlog = function deleteBlog(slug) {\n    removeBlog(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage(data.message);\n        loadBlogs();\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug) {\n    var answer = window.confirm(\"Are you sure you want to delete your blog?\");\n\n    if (answer) {\n      deleteBlog(slug);\n    }\n  };\n\n  var showUpdateButton = function showUpdateButton(blog) {\n    if (isAuth() && isAuth().role === 0) {\n      return /*#__PURE__*/_jsx(Link, {\n        href: \"/user/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/_jsx(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    } else if (isAuth() && isAuth().role === 1) {\n      return /*#__PURE__*/_jsx(Link, {\n        href: \"/admin/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/_jsx(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    }\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: \"pb-5\",\n        children: [/*#__PURE__*/_jsx(\"h3\", {\n          children: blog.title\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: \"mark\",\n          children: [\"Written by \", blog.postedBy.name, \" | Published on\", \" \", moment(blog.updatedAt).fromNow()]\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-sm btn-danger\",\n          onClick: function onClick() {\n            return deleteConfirm(blog.slug);\n          },\n          children: \"Delete\"\n        }), showUpdateButton(blog)]\n      }, i);\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-md-12\",\n        children: [message && /*#__PURE__*/_jsx(\"div\", {\n          className: \"alert alert-warning\",\n          children: message\n        }), showAllBlogs()]\n      })\n    })\n  });\n};\n\nexport default BlogRead;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { isAuth } from \"../../actions/auth\";\n\nfunction Private(_ref) {\n  var children = _ref.children;\n  useEffect(function () {\n    if (!isAuth()) {\n      Router.push(\"/signin\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n}\n\nexport default Private;"]}}