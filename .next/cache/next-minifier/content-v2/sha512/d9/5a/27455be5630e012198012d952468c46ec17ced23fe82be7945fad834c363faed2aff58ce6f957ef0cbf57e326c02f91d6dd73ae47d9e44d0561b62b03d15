{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{\"0c6W\":function(e,t,n){\"use strict\";n.d(t,\"c\",(function(){return o})),n.d(t,\"a\",(function(){return i})),n.d(t,\"b\",(function(){return l}));var c=n(\"LpSC\"),r=n.n(c),a=n(\"iuBY\"),s=\"http://arcane-shelf-33075.herokuapp.com\",o=function(e){return r()(\"\".concat(s,\"/api/user/\").concat(e),{method:\"GET\",headers:{Accept:\"application/json\"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},i=function(e){return r()(\"\".concat(s,\"/api/user/profile\"),{method:\"GET\",headers:{Accept:\"application/json\",Authorization:\"Bearer \".concat(e)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},l=function(e,t){return r()(\"\".concat(s,\"/api/user/update\"),{method:\"PUT\",headers:{Accept:\"application/json\",Authorization:\"Bearer \".concat(e)},body:t}).then((function(e){return Object(a.d)(e),e.json()})).catch((function(e){return console.log(e)}))}},GGaf:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/update\",function(){return n(\"j0R5\")}])},j0R5:function(e,t,n){\"use strict\";n.r(t);var c=n(\"nKUr\"),r=n(\"5Yp1\"),a=n(\"yxxe\"),s=n(\"rePB\"),o=(n(\"YFqc\"),n(\"q1tI\")),i=(n(\"20a2\"),n(\"iuBY\")),l=n(\"0c6W\");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=Object(o.useState)({username:\"\",name:\"\",email:\"\",about:\"\",password:\"\",error:!1,success:!1,loading:!1,photo:\"\",userData:\"\"}),t=e[0],n=e[1],r=Object(i.c)(\"token\"),a=t.username,u=t.name,d=t.email,m=t.about,b=t.password,p=t.error,h=t.success,f=t.loading,O=(t.photo,t.userData);Object(o.useEffect)((function(){Object(l.a)(r).then((function(e){e?e.error?n(j(j({},t),{},{error:e.error})):n(j(j({},t),{},{username:e.username,name:e.name,email:e.email,about:e.about})):console.log(\"no data profile update\")}))}),[]);var x=function(e){return function(c){var r,a=\"photo\"===e?c.target.files[0]:c.target.value,o=new FormData;o.set(e,a),n(j(j({},t),{},(r={},Object(s.a)(r,e,a),Object(s.a)(r,\"userData\",o),Object(s.a)(r,\"error\",!1),Object(s.a)(r,\"success\",!1),r)))}},g=function(e){e.preventDefault(),n(j(j({},t),{},{loading:!0})),Object(l.b)(r,O).then((function(e){e.error?n(j(j({},t),{},{error:e.error,success:!1,loading:!1})):Object(i.i)(e,(function(){n(j(j({},t),{},{username:e.username,name:e.name,email:e.email,about:e.about,password:\"\",success:!0,loading:!1}))}))}))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(\"div\",{className:\"container\",children:Object(c.jsxs)(\"div\",{className:\"row\",children:[Object(c.jsx)(\"div\",{className:\"col-md-4\",children:Object(c.jsx)(\"img\",{src:\"\".concat(\"http://arcane-shelf-33075.herokuapp.com/api\",\"/user/photo/\").concat(a),className:\"img img-fluid img-thumbnail mb-3\",style:{maxHeight:\"auto\",maxWidth:\"100%\"},alt:\"user profile\"})}),Object(c.jsxs)(\"div\",{className:\"col-md-8 mb-5\",children:[Object(c.jsx)(\"div\",{className:\"alert alert-success\",style:{display:h?\"\":\"none\"},children:\"Profile updated\"}),Object(c.jsx)(\"div\",{className:\"alert alert-danger\",style:{display:p?\"\":\"none\"},children:p}),Object(c.jsx)(\"div\",{className:\"alert alert-info\",style:{display:f?\"\":\"none\"},children:\"Loading...\"}),Object(c.jsxs)(\"form\",{onSubmit:g,children:[Object(c.jsx)(\"div\",{className:\"form-group\",children:Object(c.jsxs)(\"label\",{className:\"btn btn-outline-primary\",children:[\"Profile photo\",Object(c.jsx)(\"input\",{onChange:x(\"photo\"),type:\"file\",accept:\"image/*\",hidden:!0})]})}),Object(c.jsxs)(\"div\",{className:\"form-group\",children:[Object(c.jsx)(\"label\",{className:\"text-muted\",children:\"Username\"}),Object(c.jsx)(\"input\",{onChange:x(\"username\"),type:\"text\",value:a,className:\"form-control\"})]}),Object(c.jsxs)(\"div\",{className:\"form-group\",children:[Object(c.jsx)(\"label\",{className:\"text-muted\",children:\"Name\"}),Object(c.jsx)(\"input\",{onChange:x(\"name\"),type:\"text\",value:u,className:\"form-control\"})]}),Object(c.jsxs)(\"div\",{className:\"form-group\",children:[Object(c.jsx)(\"label\",{className:\"text-muted\",children:\"Email\"}),Object(c.jsx)(\"input\",{onChange:x(\"email\"),type:\"text\",value:d,className:\"form-control\"})]}),Object(c.jsxs)(\"div\",{className:\"form-group\",children:[Object(c.jsx)(\"label\",{className:\"text-muted\",children:\"About\"}),Object(c.jsx)(\"textarea\",{onChange:x(\"about\"),type:\"text\",value:m,className:\"form-control\"})]}),Object(c.jsxs)(\"div\",{className:\"form-group\",children:[Object(c.jsx)(\"label\",{className:\"text-muted\",children:\"Password\"}),Object(c.jsx)(\"input\",{onChange:x(\"password\"),type:\"password\",value:b,className:\"form-control\"})]}),Object(c.jsx)(\"div\",{children:Object(c.jsx)(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})})]})]})]})})})};t.default=function(){return Object(c.jsx)(r.a,{children:Object(c.jsx)(a.a,{children:Object(c.jsx)(\"div\",{className:\"container-fluid\",children:Object(c.jsx)(\"div\",{className:\"row\",children:Object(c.jsx)(d,{})})})})})}},yxxe:function(e,t,n){\"use strict\";var c=n(\"nKUr\"),r=n(\"q1tI\"),a=n(\"20a2\"),s=n.n(a),o=n(\"iuBY\");t.a=function(e){var t=e.children;return Object(r.useEffect)((function(){Object(o.e)()||s.a.push(\"/signin\")}),[]),Object(c.jsx)(c.Fragment,{children:t})}}},[[\"GGaf\",1,0,2,3]]]);","map":{"version":3,"sources":["static/chunks/pages/user/update-9524dca539701e7a5677.js"],"names":["_N_E","window","push","0c6W","module","__webpack_exports__","__webpack_require__","d","userPublicProfile","getProfile","update","isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__","isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default","n","_auth__WEBPACK_IMPORTED_MODULE_1__","API","username","concat","method","headers","Accept","then","response","json","err","console","log","token","Authorization","user","body","Object","GGaf","exports","__NEXT_P","j0R5","r","jsx_runtime","Layout","Private","defineProperty","react","auth","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","auth_ProfileUpdate","_useState","name","email","about","password","error","success","loading","photo","userData","values","setValues","data","handleChange","e","_objectSpread2","value","files","userFormData","FormData","set","handleSubmit","preventDefault","children","className","src","style","maxHeight","maxWidth","alt","display","onSubmit","onChange","type","accept","hidden","yxxe","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_2__","next_router__WEBPACK_IMPORTED_MODULE_2___default","_actions_auth__WEBPACK_IMPORTED_MODULE_3__","_ref","a"],"mappings":"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"},"name":"static/chunks/pages/user/update-9524dca539701e7a5677.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[34],{\n\n/***/ \"0c6W\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return userPublicProfile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getProfile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return update; });\n/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"LpSC\");\n/* harmony import */ var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"iuBY\");\n //import { API } from \"../config\";\n\n\nvar API = \"http://arcane-shelf-33075.herokuapp.com\";\nvar userPublicProfile = function userPublicProfile(username) {\n  return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default()(\"\".concat(API, \"/api/user/\").concat(username), {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\"\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nvar getProfile = function getProfile(token) {\n  return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default()(\"\".concat(API, \"/api/user/profile\"), {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Bearer \".concat(token)\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nvar update = function update(token, user) {\n  return isomorphic_fetch__WEBPACK_IMPORTED_MODULE_0___default()(\"\".concat(API, \"/api/user/update\"), {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Bearer \".concat(token)\n    },\n    body: user\n  }).then(function (response) {\n    Object(_auth__WEBPACK_IMPORTED_MODULE_1__[/* handleResponse */ \"d\"])(response);\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\n\n/***/ }),\n\n/***/ \"GGaf\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/user/update\",\n        function () {\n          return __webpack_require__(\"j0R5\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"j0R5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./components/Layout.js + 11 modules\nvar Layout = __webpack_require__(\"5Yp1\");\n\n// EXTERNAL MODULE: ./components/auth/Private.js\nvar Private = __webpack_require__(\"yxxe\");\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"rePB\");\n\n// EXTERNAL MODULE: ./node_modules/next/link.js\nvar next_link = __webpack_require__(\"YFqc\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar router = __webpack_require__(\"20a2\");\n\n// EXTERNAL MODULE: ./actions/auth.js\nvar auth = __webpack_require__(\"iuBY\");\n\n// EXTERNAL MODULE: ./actions/user.js\nvar user = __webpack_require__(\"0c6W\");\n\n// CONCATENATED MODULE: ./components/auth/ProfileUpdate.js\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n //import { API } from \"../../config\";\n\nvar API = \"http://arcane-shelf-33075.herokuapp.com/api\";\n\nvar ProfileUpdate_ProfileUpdate = function ProfileUpdate() {\n  var _useState = Object(react[\"useState\"])({\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    about: \"\",\n    password: \"\",\n    error: false,\n    success: false,\n    loading: false,\n    photo: \"\",\n    userData: \"\"\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var token = Object(auth[\"c\" /* getCookie */])(\"token\");\n  var username = values.username,\n      name = values.name,\n      email = values.email,\n      about = values.about,\n      password = values.password,\n      error = values.error,\n      success = values.success,\n      loading = values.loading,\n      photo = values.photo,\n      userData = values.userData;\n\n  var init = function init() {\n    Object(user[\"a\" /* getProfile */])(token).then(function (data) {\n      if (data) {\n        if (data.error) {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            error: data.error\n          }));\n        } else {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about\n          }));\n        }\n      } else {\n        console.log(\"no data profile update\");\n      }\n    });\n  };\n\n  Object(react[\"useEffect\"])(function () {\n    init();\n  }, []);\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      var value = name === \"photo\" ? e.target.files[0] : e.target.value;\n      var userFormData = new FormData();\n      userFormData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, Object(defineProperty[\"a\" /* default */])(_objectSpread2, name, value), Object(defineProperty[\"a\" /* default */])(_objectSpread2, \"userData\", userFormData), Object(defineProperty[\"a\" /* default */])(_objectSpread2, \"error\", false), Object(defineProperty[\"a\" /* default */])(_objectSpread2, \"success\", false), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    Object(user[\"b\" /* update */])(token, userData).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          success: false,\n          loading: false\n        }));\n      } else {\n        Object(auth[\"i\" /* updateUser */])(data, function () {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about,\n            password: \"\",\n            success: true,\n            loading: false\n          }));\n        });\n      }\n    });\n  };\n\n  var profileUpdateForm = function profileUpdateForm() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"label\", {\n          className: \"btn btn-outline-primary\",\n          children: [\"Profile photo\", /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n            onChange: handleChange(\"photo\"),\n            type: \"file\",\n            accept: \"image/*\",\n            hidden: true\n          })]\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Username\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          onChange: handleChange(\"username\"),\n          type: \"text\",\n          value: username,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Name\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          onChange: handleChange(\"name\"),\n          type: \"text\",\n          value: name,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Email\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          onChange: handleChange(\"email\"),\n          type: \"text\",\n          value: email,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"About\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\", {\n          onChange: handleChange(\"about\"),\n          type: \"text\",\n          value: about,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Password\"\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n          onChange: handleChange(\"password\"),\n          type: \"password\",\n          value: password,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Submit\"\n        })\n      })]\n    });\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      children: error\n    });\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      children: \"Profile updated\"\n    });\n  };\n\n  var showLoading = function showLoading() {\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"alert alert-info\",\n      style: {\n        display: loading ? \"\" : \"none\"\n      },\n      children: \"Loading...\"\n    });\n  };\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\", {\n            src: \"\".concat(API, \"/user/photo/\").concat(username),\n            className: \"img img-fluid img-thumbnail mb-3\",\n            style: {\n              maxHeight: \"auto\",\n              maxWidth: \"100%\"\n            },\n            alt: \"user profile\"\n          })\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n          className: \"col-md-8 mb-5\",\n          children: [showSuccess(), showError(), showLoading(), profileUpdateForm()]\n        })]\n      })\n    })\n  });\n};\n\n/* harmony default export */ var auth_ProfileUpdate = (ProfileUpdate_ProfileUpdate);\n// CONCATENATED MODULE: ./pages/user/update.js\n\n\n\n\n\nvar update_UserProfileUpdate = function UserProfileUpdate() {\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Layout[\"a\" /* default */], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Private[\"a\" /* default */], {\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(auth_ProfileUpdate, {})\n        })\n      })\n    })\n  });\n};\n\n/* harmony default export */ var update = __webpack_exports__[\"default\"] = (update_UserProfileUpdate);\n\n/***/ }),\n\n/***/ \"yxxe\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"iuBY\");\n\n\n\n\n\n\nfunction Private(_ref) {\n  var children = _ref.children;\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!Object(_actions_auth__WEBPACK_IMPORTED_MODULE_3__[/* isAuth */ \"e\"])()) {\n      next_router__WEBPACK_IMPORTED_MODULE_2___default.a.push(\"/signin\");\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: children\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Private);\n\n/***/ })\n\n},[[\"GGaf\",1,0,2,3]]]);","inputSourceMap":{"version":3,"sources":["/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/actions/user.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fuser%2Fupdate&absolutePagePath=private-next-pages%2Fuser%2Fupdate.js!","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/ProfileUpdate.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/pages/user/update.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/Private.js"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqC,WAAW,MAAM;;AAEd;AACxC;AACO;AACP,SAAS,uDAAK;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACO;AACP,SAAS,uDAAK;AACd;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACO;AACP,SAAS,uDAAK;AACd;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,IAAI,oEAAc;AAClB;AACA,GAAG;AACH;AACA,GAAG;AACH,E;;;;;;;;AC1CA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAmC;AAC5D;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN0D;AACR;AACF;AACwG;;AAExJ,0CAA0C,gCAAgC,oCAAoC,oDAAoD,8DAA8D,gEAAgE,EAAE,EAAE,gCAAgC,EAAE,aAAa;;AAEnV,gCAAgC,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,uDAAuD,CAAC,yCAAe,2BAA2B,EAAE,EAAE,EAAE,6CAA6C,2EAA2E,EAAE,OAAO,iDAAiD,kFAAkF,EAAE,EAAE,EAAE,EAAE,eAAe;;AAEvf;AACsB;AAClB;AACkC;AACX,WAAW,MAAM;;AAEzE;;AAEA,IAAI,2BAAa;AACjB,kBAAkB,yBAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,cAAc,iCAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,kCAAU;AACd;AACA;AACA,kDAAkD,aAAa;AAC/D;AACA,WAAW;AACX,SAAS;AACT,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA,EAAE,0BAAS;AACX;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C,aAAa,sBAAsB,EAAE,yCAAe,+BAA+B,yCAAe,4CAA4C,yCAAe,kCAAkC,yCAAe;AAC5P;AACA;;AAEA;AACA;AACA,4CAA4C,aAAa;AACzD;AACA,KAAK;AACL,IAAI,8BAAM;AACV;AACA,gDAAgD,aAAa;AAC7D;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,QAAQ,kCAAU;AAClB,kDAAkD,aAAa;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA,wBAAwB,2BAAK;AAC7B;AACA,8BAA8B,0BAAI;AAClC;AACA,+BAA+B,2BAAK;AACpC;AACA,mDAAmD,0BAAI;AACvD;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B;AACA,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B;AACA,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B;AACA,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B;AACA,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B;AACA,gCAAgC,0BAAI;AACpC;AACA;AACA,SAAS,gBAAgB,0BAAI;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,0BAAI;AAC3B,+BAA+B,0BAAI;AACnC;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA;AACA,wBAAwB,0BAAI;AAC5B;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA,wBAAwB,0BAAI;AAC5B;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA,wBAAwB,0BAAI;AAC5B;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;;AAEA,sBAAsB,0BAAI,CAAC,uBAAS;AACpC,2BAA2B,0BAAI;AAC/B;AACA,6BAA6B,2BAAK;AAClC;AACA,gCAAgC,0BAAI;AACpC;AACA,iCAAiC,0BAAI;AACrC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX,SAAS,gBAAgB,2BAAK;AAC9B;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,kFAAa,E;;ACnPoB;AACH;AACO;AACY;;AAEhE,IAAI,wBAAiB;AACrB,sBAAsB,0BAAI,CAAC,yBAAM;AACjC,2BAA2B,0BAAI,CAAC,0BAAO;AACvC,6BAA6B,0BAAI;AACjC;AACA,+BAA+B,0BAAI;AACnC;AACA,iCAAiC,0BAAI,CAAC,kBAAa,IAAI;AACvD,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,oGAAiB,E;;;;;;;;ACnBhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACU;AACjB;AACR;AACW;;AAE5C;AACA;AACA,EAAE,uDAAS;AACX,SAAS,oEAAM;AACf,MAAM,kDAAM;AACZ;AACA,GAAG;AACH,sBAAsB,6DAAI,CAAC,0DAAS;AACpC;AACA,GAAG;AACH;;AAEe,gEAAO,E","file":"x","sourcesContent":["import fetch from \"isomorphic-fetch\"; //import { API } from \"../config\";\n\nimport { handleResponse } from \"./auth\";\nvar API = \"http://arcane-shelf-33075.herokuapp.com\";\nexport var userPublicProfile = function userPublicProfile(username) {\n  return fetch(\"\".concat(API, \"/api/user/\").concat(username), {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\"\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nexport var getProfile = function getProfile(token) {\n  return fetch(\"\".concat(API, \"/api/user/profile\"), {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Bearer \".concat(token)\n    }\n  }).then(function (response) {\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};\nexport var update = function update(token, user) {\n  return fetch(\"\".concat(API, \"/api/user/update\"), {\n    method: \"PUT\",\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Bearer \".concat(token)\n    },\n    body: user\n  }).then(function (response) {\n    handleResponse(response);\n    return response.json();\n  })[\"catch\"](function (err) {\n    return console.log(err);\n  });\n};","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/user/update\",\n        function () {\n          return require(\"private-next-pages/user/update.js\");\n        }\n      ]);\n    ","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from \"next/link\";\nimport React, { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { getCookie, isAuth, updateUser } from \"../../actions/auth\";\nimport { getProfile, update } from \"../../actions/user\"; //import { API } from \"../../config\";\n\nvar API = \"http://arcane-shelf-33075.herokuapp.com/api\";\n\nvar ProfileUpdate = function ProfileUpdate() {\n  var _useState = useState({\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    about: \"\",\n    password: \"\",\n    error: false,\n    success: false,\n    loading: false,\n    photo: \"\",\n    userData: \"\"\n  }),\n      values = _useState[0],\n      setValues = _useState[1];\n\n  var token = getCookie(\"token\");\n  var username = values.username,\n      name = values.name,\n      email = values.email,\n      about = values.about,\n      password = values.password,\n      error = values.error,\n      success = values.success,\n      loading = values.loading,\n      photo = values.photo,\n      userData = values.userData;\n\n  var init = function init() {\n    getProfile(token).then(function (data) {\n      if (data) {\n        if (data.error) {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            error: data.error\n          }));\n        } else {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about\n          }));\n        }\n      } else {\n        console.log(\"no data profile update\");\n      }\n    });\n  };\n\n  useEffect(function () {\n    init();\n  }, []);\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      var value = name === \"photo\" ? e.target.files[0] : e.target.value;\n      var userFormData = new FormData();\n      userFormData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"userData\", userFormData), _defineProperty(_objectSpread2, \"error\", false), _defineProperty(_objectSpread2, \"success\", false), _objectSpread2)));\n    };\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true\n    }));\n    update(token, userData).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          success: false,\n          loading: false\n        }));\n      } else {\n        updateUser(data, function () {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            username: data.username,\n            name: data.name,\n            email: data.email,\n            about: data.about,\n            password: \"\",\n            success: true,\n            loading: false\n          }));\n        });\n      }\n    });\n  };\n\n  var profileUpdateForm = function profileUpdateForm() {\n    return /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxs(\"label\", {\n          className: \"btn btn-outline-primary\",\n          children: [\"Profile photo\", /*#__PURE__*/_jsx(\"input\", {\n            onChange: handleChange(\"photo\"),\n            type: \"file\",\n            accept: \"image/*\",\n            hidden: true\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Username\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          onChange: handleChange(\"username\"),\n          type: \"text\",\n          value: username,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Name\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          onChange: handleChange(\"name\"),\n          type: \"text\",\n          value: name,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Email\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          onChange: handleChange(\"email\"),\n          type: \"text\",\n          value: email,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"About\"\n        }), /*#__PURE__*/_jsx(\"textarea\", {\n          onChange: handleChange(\"about\"),\n          type: \"text\",\n          value: about,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Password\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          onChange: handleChange(\"password\"),\n          type: \"password\",\n          value: password,\n          className: \"form-control\"\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Submit\"\n        })\n      })]\n    });\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      children: error\n    });\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      children: \"Profile updated\"\n    });\n  };\n\n  var showLoading = function showLoading() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-info\",\n      style: {\n        display: loading ? \"\" : \"none\"\n      },\n      children: \"Loading...\"\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsx(\"img\", {\n            src: \"\".concat(API, \"/user/photo/\").concat(username),\n            className: \"img img-fluid img-thumbnail mb-3\",\n            style: {\n              maxHeight: \"auto\",\n              maxWidth: \"100%\"\n            },\n            alt: \"user profile\"\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-md-8 mb-5\",\n          children: [showSuccess(), showError(), showLoading(), profileUpdateForm()]\n        })]\n      })\n    })\n  });\n};\n\nexport default ProfileUpdate;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../../components/Layout\";\nimport Private from \"../../components/auth/Private\";\nimport ProfileUpdate from \"../../components/auth/ProfileUpdate\";\n\nvar UserProfileUpdate = function UserProfileUpdate() {\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Private, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsx(ProfileUpdate, {})\n        })\n      })\n    })\n  });\n};\n\nexport default UserProfileUpdate;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { isAuth } from \"../../actions/auth\";\n\nfunction Private(_ref) {\n  var children = _ref.children;\n  useEffect(function () {\n    if (!isAuth()) {\n      Router.push(\"/signin\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n}\n\nexport default Private;"]}}