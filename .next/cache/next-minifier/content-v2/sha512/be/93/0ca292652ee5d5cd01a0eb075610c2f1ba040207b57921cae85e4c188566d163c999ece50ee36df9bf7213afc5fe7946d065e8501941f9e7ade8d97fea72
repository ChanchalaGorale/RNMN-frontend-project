{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{\"0lIN\":function(e,n,c){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/crud/blogs\",function(){return c(\"BzMX\")}])},BzMX:function(e,n,c){\"use strict\";c.r(n);var t=c(\"nKUr\"),r=c(\"5Yp1\"),s=c(\"vC6e\"),a=c(\"nVAt\");c(\"YFqc\");n.default=function(){return Object(t.jsx)(r.a,{children:Object(t.jsx)(s.a,{children:Object(t.jsx)(\"div\",{className:\"container\",children:Object(t.jsxs)(\"div\",{className:\"row\",children:[Object(t.jsx)(\"div\",{className:\"col-md-12 pt-5 pb-5\",children:Object(t.jsx)(\"h2\",{children:\"Manage blogs\"})}),Object(t.jsx)(\"div\",{className:\"col-md-12\",children:Object(t.jsx)(a.a,{})})]})})})})}},nVAt:function(e,n,c){\"use strict\";var t=c(\"nKUr\"),r=c(\"YFqc\"),s=c.n(r),a=c(\"q1tI\"),i=(c(\"20a2\"),c(\"iuBY\")),o=c(\"zycw\"),l=c(\"wd/R\"),j=c.n(l);n.a=function(e){var n=e.username,c=Object(a.useState)([]),r=c[0],l=c[1],b=Object(a.useState)(\"\"),u=b[0],d=b[1],O=Object(i.c)(\"token\");Object(a.useEffect)((function(){h()}),[]);var h=function(){Object(o.b)(n).then((function(e){e.error?console.log(e.error):l(e)}))},m=function(e){window.confirm(\"Are you sure you want to delete your blog?\")&&function(e){Object(o.f)(e,O).then((function(e){e.error?console.log(e.error):(d(e.message),h())}))}(e)},f=function(e){return Object(i.e)()&&0===Object(i.e)().role?Object(t.jsx)(s.a,{href:\"/user/crud/\".concat(e.slug),children:Object(t.jsx)(\"a\",{className:\"ml-2 btn btn-sm btn-warning\",children:\"Update\"})}):Object(i.e)()&&1===Object(i.e)().role?Object(t.jsx)(s.a,{href:\"/admin/crud/\".concat(e.slug),children:Object(t.jsx)(\"a\",{className:\"ml-2 btn btn-sm btn-warning\",children:\"Update\"})}):void 0};return Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(\"div\",{className:\"row\",children:Object(t.jsxs)(\"div\",{className:\"col-md-12\",children:[u&&Object(t.jsx)(\"div\",{className:\"alert alert-warning\",children:u}),r.map((function(e,n){return Object(t.jsxs)(\"div\",{className:\"pb-5\",children:[Object(t.jsx)(\"h3\",{children:e.title}),Object(t.jsxs)(\"p\",{className:\"mark\",children:[\"Written by \",e.postedBy.name,\" | Published on\",\" \",j()(e.updatedAt).fromNow()]}),Object(t.jsx)(\"button\",{className:\"btn btn-sm btn-danger\",onClick:function(){return m(e.slug)},children:\"Delete\"}),f(e)]},n)}))]})})})}},vC6e:function(e,n,c){\"use strict\";var t=c(\"nKUr\"),r=c(\"q1tI\"),s=c(\"20a2\"),a=c.n(s),i=c(\"iuBY\");n.a=function(e){var n=e.children;return Object(r.useEffect)((function(){Object(i.e)()?1!==Object(i.e)().role&&a.a.push(\"/\"):a.a.push(\"/signin\")}),[]),Object(t.jsx)(t.Fragment,{children:n})}}},[[\"0lIN\",1,0,4,2,3,5]]]);","map":{"version":3,"sources":["static/chunks/pages/admin/crud/blogs-2d74ab92564ec6b6a18c.js"],"names":["_N_E","window","push","0lIN","module","exports","__webpack_require__","__NEXT_P","BzMX","__webpack_exports__","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_components_Layout__WEBPACK_IMPORTED_MODULE_1__","_components_auth_Admin__WEBPACK_IMPORTED_MODULE_2__","_components_crud_BlogRead__WEBPACK_IMPORTED_MODULE_3__","Object","children","className","nVAt","next_link__WEBPACK_IMPORTED_MODULE_1__","next_link__WEBPACK_IMPORTED_MODULE_1___default","n","react__WEBPACK_IMPORTED_MODULE_2__","_actions_auth__WEBPACK_IMPORTED_MODULE_4__","_actions_blog__WEBPACK_IMPORTED_MODULE_5__","moment__WEBPACK_IMPORTED_MODULE_6__","moment__WEBPACK_IMPORTED_MODULE_6___default","_ref","username","_useState","blogs","setBlogs","_useState2","message","setMessage","token","loadBlogs","then","data","error","console","log","deleteConfirm","slug","confirm","deleteBlog","showUpdateButton","blog","role","a","href","concat","map","i","title","postedBy","name","updatedAt","fromNow","onClick","vC6e","react__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_2__","next_router__WEBPACK_IMPORTED_MODULE_2___default","_actions_auth__WEBPACK_IMPORTED_MODULE_3__"],"mappings":"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"},"name":"static/chunks/pages/admin/crud/blogs-2d74ab92564ec6b6a18c.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[16],{\n\n/***/ \"0lIN\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/admin/crud/blogs\",\n        function () {\n          return __webpack_require__(\"BzMX\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"BzMX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"5Yp1\");\n/* harmony import */ var _components_auth_Admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"vC6e\");\n/* harmony import */ var _components_crud_BlogRead__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"nVAt\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\n\nvar Blog = function Blog() {\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Layout__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_auth_Admin__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"col-md-12 pt-5 pb-5\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h2\", {\n              children: \"Manage blogs\"\n            })\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_crud_BlogRead__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {})\n          })]\n        })\n      })\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Blog);\n\n/***/ }),\n\n/***/ \"nVAt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"iuBY\");\n/* harmony import */ var _actions_blog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"zycw\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"wd/R\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\n\n\nvar BlogRead = function BlogRead(_ref) {\n  var username = _ref.username;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])([]),\n      blogs = _useState[0],\n      setBlogs = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(\"\"),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* getCookie */ \"c\"])(\"token\");\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    loadBlogs();\n  }, []);\n\n  var loadBlogs = function loadBlogs() {\n    Object(_actions_blog__WEBPACK_IMPORTED_MODULE_5__[/* list */ \"b\"])(username).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setBlogs(data);\n      }\n    });\n  };\n\n  var deleteBlog = function deleteBlog(slug) {\n    Object(_actions_blog__WEBPACK_IMPORTED_MODULE_5__[/* removeBlog */ \"f\"])(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage(data.message);\n        loadBlogs();\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug) {\n    var answer = window.confirm(\"Are you sure you want to delete your blog?\");\n\n    if (answer) {\n      deleteBlog(slug);\n    }\n  };\n\n  var showUpdateButton = function showUpdateButton(blog) {\n    if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])().role === 0) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_link__WEBPACK_IMPORTED_MODULE_1___default.a, {\n        href: \"/user/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    } else if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_4__[/* isAuth */ \"e\"])().role === 1) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(next_link__WEBPACK_IMPORTED_MODULE_1___default.a, {\n        href: \"/admin/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    }\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"pb-5\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h3\", {\n          children: blog.title\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"p\", {\n          className: \"mark\",\n          children: [\"Written by \", blog.postedBy.name, \" | Published on\", \" \", moment__WEBPACK_IMPORTED_MODULE_6___default()(blog.updatedAt).fromNow()]\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n          className: \"btn btn-sm btn-danger\",\n          onClick: function onClick() {\n            return deleteConfirm(blog.slug);\n          },\n          children: \"Delete\"\n        }), showUpdateButton(blog)]\n      }, i);\n    });\n  };\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"col-md-12\",\n        children: [message && /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n          className: \"alert alert-warning\",\n          children: message\n        }), showAllBlogs()]\n      })\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BlogRead);\n\n/***/ }),\n\n/***/ \"vC6e\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"iuBY\");\n\n\n\n\n\n\nfunction Admin(_ref) {\n  var children = _ref.children;\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!Object(_actions_auth__WEBPACK_IMPORTED_MODULE_3__[/* isAuth */ \"e\"])()) {\n      next_router__WEBPACK_IMPORTED_MODULE_2___default.a.push(\"/signin\");\n    } else if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_3__[/* isAuth */ \"e\"])().role !== 1) {\n      next_router__WEBPACK_IMPORTED_MODULE_2___default.a.push(\"/\");\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: children\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Admin);\n\n/***/ })\n\n},[[\"0lIN\",1,0,4,2,3,5]]]);","inputSourceMap":{"version":3,"sources":["/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fadmin%2Fcrud%2Fblogs&absolutePagePath=private-next-pages%2Fadmin%2Fcrud%2Fblogs.js!","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/pages/admin/crud/blogs.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/crud/BlogRead.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/Admin.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAwC;AACjE;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACF;AACA;AACG;AACM;AAC5B;;AAE7B;AACA,sBAAsB,6DAAI,CAAC,kEAAM;AACjC,2BAA2B,6DAAI,CAAC,sEAAK;AACrC,6BAA6B,6DAAI;AACjC;AACA,+BAA+B,8DAAK;AACpC;AACA,kCAAkC,6DAAI;AACtC;AACA,mCAAmC,6DAAI;AACvC;AACA,aAAa;AACb,WAAW,gBAAgB,6DAAI;AAC/B;AACA,mCAAmC,6DAAI,CAAC,yEAAQ,IAAI;AACpD,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,mEAAI,E;;;;;;;;AC7BnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AACR;AACF;AACnB;AACe;AACX;AACsB;AACD;AAC1B;;AAE5B;AACA;;AAEA,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA,cAAc,uEAAS;AACvB,EAAE,uDAAS;AACX;AACA,GAAG;;AAEH;AACA,IAAI,kEAAI;AACR;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;AACA,IAAI,wEAAU;AACd;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,oEAAM,MAAM,oEAAM;AAC1B,0BAA0B,6DAAI,CAAC,gDAAI;AACnC;AACA,+BAA+B,6DAAI;AACnC;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK,UAAU,oEAAM,MAAM,oEAAM;AACjC,0BAA0B,6DAAI,CAAC,gDAAI;AACnC;AACA,+BAA+B,6DAAI;AACnC;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA;AACA,0BAA0B,8DAAK;AAC/B;AACA,gCAAgC,6DAAI;AACpC;AACA,SAAS,gBAAgB,8DAAK;AAC9B;AACA,gFAAgF,6CAAM;AACtF,SAAS,gBAAgB,6DAAI;AAC7B;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;;AAEA,sBAAsB,6DAAI,CAAC,0DAAS;AACpC,2BAA2B,6DAAI;AAC/B;AACA,6BAA6B,8DAAK;AAClC;AACA,2CAA2C,6DAAI;AAC/C;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,iEAAQ,E;;;;;;;;AC7GvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACU;AACjB;AACR;AACW;;AAE5C;AACA;AACA,EAAE,uDAAS;AACX,SAAS,oEAAM;AACf,MAAM,kDAAM;AACZ,KAAK,UAAU,oEAAM;AACrB,MAAM,kDAAM;AACZ;AACA,GAAG;AACH,sBAAsB,6DAAI,CAAC,0DAAS;AACpC;AACA,GAAG;AACH;;AAEe,8DAAK,E","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/admin/crud/blogs\",\n        function () {\n          return require(\"private-next-pages/admin/crud/blogs.js\");\n        }\n      ]);\n    ","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../../../components/Layout\";\nimport Admin from \"../../../components/auth/Admin\";\nimport BlogRead from \"../../../components/crud/BlogRead\";\nimport Link from \"next/link\";\n\nvar Blog = function Blog() {\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Admin, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-12 pt-5 pb-5\",\n            children: /*#__PURE__*/_jsx(\"h2\", {\n              children: \"Manage blogs\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/_jsx(BlogRead, {})\n          })]\n        })\n      })\n    })\n  });\n};\n\nexport default Blog;","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Link from \"next/link\";\nimport { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { getCookie, isAuth } from \"../../actions/auth\";\nimport { list, removeBlog } from \"../../actions/blog\";\nimport moment from \"moment\";\n\nvar BlogRead = function BlogRead(_ref) {\n  var username = _ref.username;\n\n  var _useState = useState([]),\n      blogs = _useState[0],\n      setBlogs = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      message = _useState2[0],\n      setMessage = _useState2[1];\n\n  var token = getCookie(\"token\");\n  useEffect(function () {\n    loadBlogs();\n  }, []);\n\n  var loadBlogs = function loadBlogs() {\n    list(username).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setBlogs(data);\n      }\n    });\n  };\n\n  var deleteBlog = function deleteBlog(slug) {\n    removeBlog(slug, token).then(function (data) {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        setMessage(data.message);\n        loadBlogs();\n      }\n    });\n  };\n\n  var deleteConfirm = function deleteConfirm(slug) {\n    var answer = window.confirm(\"Are you sure you want to delete your blog?\");\n\n    if (answer) {\n      deleteBlog(slug);\n    }\n  };\n\n  var showUpdateButton = function showUpdateButton(blog) {\n    if (isAuth() && isAuth().role === 0) {\n      return /*#__PURE__*/_jsx(Link, {\n        href: \"/user/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/_jsx(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    } else if (isAuth() && isAuth().role === 1) {\n      return /*#__PURE__*/_jsx(Link, {\n        href: \"/admin/crud/\".concat(blog.slug),\n        children: /*#__PURE__*/_jsx(\"a\", {\n          className: \"ml-2 btn btn-sm btn-warning\",\n          children: \"Update\"\n        })\n      });\n    }\n  };\n\n  var showAllBlogs = function showAllBlogs() {\n    return blogs.map(function (blog, i) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: \"pb-5\",\n        children: [/*#__PURE__*/_jsx(\"h3\", {\n          children: blog.title\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: \"mark\",\n          children: [\"Written by \", blog.postedBy.name, \" | Published on\", \" \", moment(blog.updatedAt).fromNow()]\n        }), /*#__PURE__*/_jsx(\"button\", {\n          className: \"btn btn-sm btn-danger\",\n          onClick: function onClick() {\n            return deleteConfirm(blog.slug);\n          },\n          children: \"Delete\"\n        }), showUpdateButton(blog)]\n      }, i);\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-md-12\",\n        children: [message && /*#__PURE__*/_jsx(\"div\", {\n          className: \"alert alert-warning\",\n          children: message\n        }), showAllBlogs()]\n      })\n    })\n  });\n};\n\nexport default BlogRead;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { isAuth } from \"../../actions/auth\";\n\nfunction Admin(_ref) {\n  var children = _ref.children;\n  useEffect(function () {\n    if (!isAuth()) {\n      Router.push(\"/signin\");\n    } else if (isAuth().role !== 1) {\n      Router.push(\"/\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n}\n\nexport default Admin;"]}}