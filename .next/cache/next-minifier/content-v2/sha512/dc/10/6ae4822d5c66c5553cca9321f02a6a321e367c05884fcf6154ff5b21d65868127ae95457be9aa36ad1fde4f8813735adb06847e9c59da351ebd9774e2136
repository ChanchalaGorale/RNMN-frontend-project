{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{AhMt:function(e,t,c){\"use strict\";var r=c(\"nKUr\"),n=c(\"KQm4\"),s=c(\"rePB\"),a=(c(\"YFqc\"),c(\"q1tI\")),i=c(\"20a2\"),l=c.n(i),o=c(\"Vvt1\"),j=c.n(o),u=c(\"iuBY\"),b=c(\"abxw\"),d=c(\"SMr6\"),O=c(\"zycw\"),h=(c(\"91UR\"),c(\"//g3\")),f=c(\"WjD0\");function m(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,r)}return c}function p(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?m(Object(c),!0).forEach((function(t){Object(s.a)(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):m(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}var x=j()((function(){return Promise.all([c.e(0),c.e(11),c.e(6),c.e(12)]).then(c.t.bind(null,\"rmP6\",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"rmP6\"]},modules:[\"react-quill\"]}});t.a=Object(i.withRouter)((function(e){var t,c=e.router,i=Object(a.useState)(\"\"),o=i[0],j=i[1],m=Object(a.useState)([]),g=m[0],v=m[1],y=Object(a.useState)([]),w=y[0],N=y[1],_=Object(a.useState)([]),P=_[0],D=_[1],k=Object(a.useState)([]),S=k[0],q=k[1],E=Object(a.useState)((t={title:\"\",error:\"\",success:\"\",formData:new f},Object(s.a)(t,\"title\",\"\"),Object(s.a)(t,\"body\",\"\"),t)),C=E[0],U=E[1],M=C.error,T=C.success,Y=C.formData,F=C.title,B=Object(u.c)(\"token\");Object(a.useEffect)((function(){U(p(p({},C),{},{formData:new f})),K(),I(),W()}),[c]);var K=function(){c.query.slug&&Object(O.f)(c.query.slug).then((function(e){e.error?console.log(e.error):(U(p(p({},C),{},{title:e.title})),j(e.body),z(e.categories),G(e.tags))}))},z=function(e){var t=[];e.map((function(e,c){t.push(e._id)})),D(t)},G=function(e){var t=[];e.map((function(e,c){t.push(e._id)})),q(t)},I=function(){Object(b.b)().then((function(e){e.error?U(p(p({},C),{},{error:e.error})):v(e)}))},W=function(){Object(d.b)().then((function(e){e.error?U(p(p({},C),{},{error:e.error})):N(e)}))},A=function(e){return function(){U(p(p({},C),{},{error:\"\"}));var t=P.indexOf(e),c=Object(n.a)(P);-1===t?c.push(e):c.splice(t,1),console.log(c),D(c),Y.set(\"categories\",c)}},H=function(e){return function(){U(p(p({},C),{},{error:\"\"}));var t=S.indexOf(e),c=Object(n.a)(S);-1===t?c.push(e):c.splice(t,1),console.log(c),q(c),Y.set(\"tags\",c)}},J=function(e){return-1!==P.indexOf(e)},R=function(e){return-1!==S.indexOf(e)},X=function(e){return function(t){var c,r=\"photo\"===e?t.target.files[0]:t.target.value;Y.set(e,r),U(p(p({},C),{},(c={},Object(s.a)(c,e,r),Object(s.a)(c,\"formData\",Y),Object(s.a)(c,\"error\",\"\"),c)))}},Q=function(e){j(e),Y.set(\"body\",e)},V=function(e){e.preventDefault(),Object(O.g)(Y,B,c.query.slug).then((function(e){e.error?U(p(p({},C),{},{error:e.error})):(U(p(p({},C),{},{title:\"\",success:'Blog titled \"'.concat(e.title,'\" is successfully updated')})),Object(u.e)()&&1===Object(u.e)().role?l.a.replace(\"/admin\"):Object(u.e)()&&0===Object(u.e)().role&&l.a.replace(\"/user\"))}))};return Object(r.jsx)(\"div\",{className:\"container-fluid pb-5\",children:Object(r.jsxs)(\"div\",{className:\"row\",children:[Object(r.jsxs)(\"div\",{className:\"col-md-8\",children:[Object(r.jsxs)(\"form\",{onSubmit:V,children:[Object(r.jsxs)(\"div\",{className:\"form-group\",children:[Object(r.jsx)(\"label\",{className:\"text-muted\",children:\"Title\"}),Object(r.jsx)(\"input\",{type:\"text\",className:\"form-control\",value:F,onChange:X(\"title\")})]}),Object(r.jsx)(\"div\",{className:\"form-group\",children:Object(r.jsx)(x,{modules:h.b,formats:h.a,value:o,placeholder:\"Write something amazing...\",onChange:Q})}),Object(r.jsx)(\"div\",{children:Object(r.jsx)(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})})]}),Object(r.jsxs)(\"div\",{className:\"pt-3\",children:[Object(r.jsx)(\"div\",{className:\"alert alert-success\",style:{display:T?\"\":\"none\"},children:T}),Object(r.jsx)(\"div\",{className:\"alert alert-danger\",style:{display:M?\"\":\"none\"},children:M})]}),o&&Object(r.jsx)(\"img\",{src:\"\".concat(\"http://localhost:8000\",\"/blog/photo/\").concat(c.query.slug),alt:F,style:{width:\"100%\"}})]}),Object(r.jsxs)(\"div\",{className:\"col-md-4\",children:[Object(r.jsx)(\"div\",{children:Object(r.jsxs)(\"div\",{className:\"form-group pb-2\",children:[Object(r.jsx)(\"h5\",{children:\"Featured image\"}),Object(r.jsx)(\"hr\",{}),Object(r.jsx)(\"small\",{className:\"text-muted\",children:\"Max size: 1mb\"}),Object(r.jsx)(\"br\",{}),Object(r.jsxs)(\"label\",{className:\"btn btn-outline-info\",children:[\"Upload featured image\",Object(r.jsx)(\"input\",{onChange:X(\"photo\"),type:\"file\",accept:\"image/*\",hidden:!0})]})]})}),Object(r.jsxs)(\"div\",{children:[Object(r.jsx)(\"h5\",{children:\"Categories\"}),Object(r.jsx)(\"hr\",{}),Object(r.jsx)(\"ul\",{style:{maxHeight:\"200px\",overflowY:\"scroll\"},children:g&&g.map((function(e,t){return Object(r.jsxs)(\"li\",{className:\"list-unstyled\",children:[Object(r.jsx)(\"input\",{onChange:A(e._id),checked:J(e._id),type:\"checkbox\",className:\"mr-2\"}),Object(r.jsx)(\"label\",{className:\"form-check-label\",children:e.name})]},t)}))})]}),Object(r.jsxs)(\"div\",{children:[Object(r.jsx)(\"h5\",{children:\"Tags\"}),Object(r.jsx)(\"hr\",{}),Object(r.jsx)(\"ul\",{style:{maxHeight:\"200px\",overflowY:\"scroll\"},children:w&&w.map((function(e,t){return Object(r.jsxs)(\"li\",{className:\"list-unstyled\",children:[Object(r.jsx)(\"input\",{onChange:H(e._id),checked:R(e._id),type:\"checkbox\",className:\"mr-2\"}),Object(r.jsx)(\"label\",{className:\"form-check-label\",children:e.name})]},t)}))})]})]})]})})}))},WjD0:function(e,t){e.exports=\"object\"==typeof self?self.FormData:window.FormData},iT7G:function(e,t,c){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/crud/[slug]\",function(){return c(\"we8M\")}])},vC6e:function(e,t,c){\"use strict\";var r=c(\"nKUr\"),n=c(\"q1tI\"),s=c(\"20a2\"),a=c.n(s),i=c(\"iuBY\");t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(i.e)()?1!==Object(i.e)().role&&a.a.push(\"/\"):a.a.push(\"/signin\")}),[]),Object(r.jsx)(r.Fragment,{children:t})}},we8M:function(e,t,c){\"use strict\";c.r(t);var r=c(\"nKUr\"),n=c(\"5Yp1\"),s=c(\"vC6e\"),a=c(\"AhMt\");c(\"q1tI\");t.default=function(){return Object(r.jsx)(n.a,{children:Object(r.jsx)(s.a,{children:Object(r.jsx)(\"div\",{className:\"container-fluid\",children:Object(r.jsxs)(\"div\",{className:\"row\",children:[Object(r.jsx)(\"div\",{className:\"col-md-12 pt-5 pb-5\",children:Object(r.jsx)(\"h2\",{children:\"Update blog\"})}),Object(r.jsx)(\"div\",{className:\"col-md-12\",children:Object(r.jsx)(a.a,{})})]})})})})}}},[[\"iT7G\",1,0,2,3,8,9]]]);","map":{"version":3,"sources":["static/chunks/pages/admin/crud/[slug]-043424154fcd59ede3e1.js"],"names":["_N_E","window","push","AhMt","module","__webpack_exports__","__webpack_require__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_4__","next_router__WEBPACK_IMPORTED_MODULE_5__","next_router__WEBPACK_IMPORTED_MODULE_5___default","n","next_dynamic__WEBPACK_IMPORTED_MODULE_6__","next_dynamic__WEBPACK_IMPORTED_MODULE_6___default","_actions_auth__WEBPACK_IMPORTED_MODULE_7__","_actions_category__WEBPACK_IMPORTED_MODULE_8__","_actions_tag__WEBPACK_IMPORTED_MODULE_9__","_actions_blog__WEBPACK_IMPORTED_MODULE_10__","_helpers_quill__WEBPACK_IMPORTED_MODULE_12__","form_data__WEBPACK_IMPORTED_MODULE_13__","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","ReactQuill","Promise","all","e","then","t","bind","ssr","loadableGenerated","webpack","modules","_ref","_useState7","router","_useState","body","setBody","_useState2","categories","setCategories","_useState3","tags","setTags","_useState4","checked","setChecked","_useState5","checkedTag","setCheckedTag","_useState6","title","error","success","formData","values","setValues","token","initBlog","initCategories","initTags","query","slug","data","console","log","setCategoriesArray","setTagsArray","blogCategories","ca","map","c","_id","blogTags","ta","handleToggle","clickedCategory","indexOf","splice","set","handleTagsToggle","clickedTag","findOutCategory","findOutTag","handleChange","name","_objectSpread2","value","files","handleBody","editBlog","preventDefault","concat","role","a","replace","className","children","onSubmit","type","onChange","formats","placeholder","style","display","src","alt","width","accept","hidden","maxHeight","overflowY","WjD0","exports","self","FormData","iT7G","__NEXT_P","vC6e","react__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_2__","next_router__WEBPACK_IMPORTED_MODULE_2___default","_actions_auth__WEBPACK_IMPORTED_MODULE_3__","we8M","r","_components_Layout__WEBPACK_IMPORTED_MODULE_1__","_components_auth_Admin__WEBPACK_IMPORTED_MODULE_2__","_components_crud_BlogUpdate__WEBPACK_IMPORTED_MODULE_3__"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAErEC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACqB,IAAIC,EAAiDD,EAAoB,QAErEE,EAA2JF,EAAoB,QAC/KG,EAAwJH,EAAoB,QAG5KI,GAFyCJ,EAAoB,QAExBA,EAAoB,SAEzDK,EAA2CL,EAAoB,QAC/DM,EAAgEN,EAAoBO,EAAEF,GACtFG,EAA4CR,EAAoB,QAChES,EAAiET,EAAoBO,EAAEC,GACvFE,EAA6CV,EAAoB,QACjEW,EAAiDX,EAAoB,QACrEY,EAA4CZ,EAAoB,QAChEa,EAA8Cb,EAAoB,QAGlEc,GAF8Ed,EAAoB,QAEnDA,EAAoB,SACnEe,EAA0Cf,EAAoB,QAOvF,SAASgB,EAAQC,EAAQC,GAAkB,IAAIC,EAAOC,OAAOD,KAAKF,GAAS,GAAIG,OAAOC,sBAAuB,CAAE,IAAIC,EAAUF,OAAOC,sBAAsBJ,GAAaC,IAAgBI,EAAUA,EAAQC,QAAO,SAAUC,GAAO,OAAOJ,OAAOK,yBAAyBR,EAAQO,GAAKE,eAAgBP,EAAKvB,KAAK+B,MAAMR,EAAMG,GAAY,OAAOH,EAE9U,SAASS,EAAcC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAAyB,MAAhBF,UAAUD,GAAaC,UAAUD,GAAK,GAAQA,EAAI,EAAKd,EAAQI,OAAOa,IAAS,GAAMC,SAAQ,SAAUC,GAAOf,OAAOjB,EAAuK,EAA9KiB,CAAiLS,EAAQM,EAAKF,EAAOE,OAAsBf,OAAOgB,0BAA6BhB,OAAOiB,iBAAiBR,EAAQT,OAAOgB,0BAA0BH,IAAmBjB,EAAQI,OAAOa,IAASC,SAAQ,SAAUC,GAAOf,OAAOkB,eAAeT,EAAQM,EAAKf,OAAOK,yBAAyBQ,EAAQE,OAAe,OAAON,EAW9qB,IAAIU,EAAa9B,GAAAA,EAAoD,WACnE,OAAO+B,QAAQC,IAAkB,CAACzC,EAAoB0C,EAAE,GAAI1C,EAAoB0C,EAAE,IAAK1C,EAAoB0C,EAAE,GAAI1C,EAAoB0C,EAAE,MAAMC,KAAK3C,EAAoB4C,EAAEC,KAAK,KAAM,OAAQ,MAC1L,CACDC,KAAK,EACLC,kBAAmB,CACjBC,QAAS,WACP,MAAO,CAAoB,SAE7BC,QAAS,CAAC,kBAgXelD,EAAuB,EAAKqB,OAAOf,EAAqD,WAA7D,EAxWvC,SAAoB6C,GACnC,IAAIC,EAEAC,EAASF,EAAKE,OAEdC,EAAYjC,OAAOhB,EAA6C,SAApDgB,CAAuD,IACnEkC,EAAOD,EAAU,GACjBE,EAAUF,EAAU,GAEpBG,EAAapC,OAAOhB,EAA6C,SAApDgB,CAAuD,IACpEqC,EAAaD,EAAW,GACxBE,EAAgBF,EAAW,GAE3BG,EAAavC,OAAOhB,EAA6C,SAApDgB,CAAuD,IACpEwC,EAAOD,EAAW,GAClBE,EAAUF,EAAW,GAErBG,EAAa1C,OAAOhB,EAA6C,SAApDgB,CAAuD,IACpE2C,EAAUD,EAAW,GACrBE,EAAaF,EAAW,GAGxBG,EAAa7C,OAAOhB,EAA6C,SAApDgB,CAAuD,IACpE8C,EAAaD,EAAW,GACxBE,EAAgBF,EAAW,GAG3BG,EAAahD,OAAOhB,EAA6C,SAApDgB,EAAwD+B,EAAa,CACpFkB,MAAO,GACPC,MAAO,GACPC,QAAS,GACTC,SAAU,IAAIzD,GACbK,OAAOjB,EAAuK,EAA9KiB,CAAiL+B,EAAY,QAAS,IAAK/B,OAAOjB,EAAuK,EAA9KiB,CAAiL+B,EAAY,OAAQ,IAAKA,IACpZsB,EAASL,EAAW,GACpBM,EAAYN,EAAW,GAEvBE,EAAQG,EAAOH,MACfC,EAAUE,EAAOF,QACjBC,EAAWC,EAAOD,SAClBH,EAAQI,EAAOJ,MACfM,EAAQvD,OAAOV,EAA8D,EAArEU,CAAwE,SACpFA,OAAOhB,EAA8C,UAArDgB,EAAwD,WACtDsD,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDD,SAAU,IAAIzD,KAEhB6D,IACAC,IACAC,MACC,CAAC1B,IAEJ,IAAIwB,EAAW,WACTxB,EAAO2B,MAAMC,MACf5D,OAAOP,EAAgE,EAAvEO,CAA0EgC,EAAO2B,MAAMC,MAAMrC,MAAK,SAAUsC,GACtGA,EAAKX,MACPY,QAAQC,IAAIF,EAAKX,QAEjBI,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDJ,MAAOY,EAAKZ,SAEdd,EAAQ0B,EAAK3B,MACb8B,EAAmBH,EAAKxB,YACxB4B,EAAaJ,EAAKrB,WAMtBwB,EAAqB,SAA4BE,GACnD,IAAIC,EAAK,GACTD,EAAeE,KAAI,SAAUC,EAAG3D,GAC9ByD,EAAG3F,KAAK6F,EAAEC,QAEZ1B,EAAWuB,IAGTF,EAAe,SAAsBM,GACvC,IAAIC,EAAK,GACTD,EAASH,KAAI,SAAU5C,EAAGd,GACxB8D,EAAGhG,KAAKgD,EAAE8C,QAEZvB,EAAcyB,IAGZf,EAAiB,WACnBzD,OAAOT,EAAsE,EAA7ES,GAAkFuB,MAAK,SAAUsC,GAC3FA,EAAKX,MACPI,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDH,MAAOW,EAAKX,SAGdZ,EAAcuB,OAKhBH,EAAW,WACb1D,OAAOR,EAA2D,EAAlEQ,GAAuEuB,MAAK,SAAUsC,GAChFA,EAAKX,MACPI,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDH,MAAOW,EAAKX,SAGdT,EAAQoB,OAKVY,EAAe,SAAsBJ,GACvC,OAAO,WACLf,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDH,MAAO,MAGT,IAAIwB,EAAkB/B,EAAQgC,QAAQN,GAElChD,EAAMrB,OAAOlB,EAA0K,EAAjLkB,CAAoL2C,IAErK,IAArB+B,EACFrD,EAAI7C,KAAK6F,GAEThD,EAAIuD,OAAOF,EAAiB,GAG9BZ,QAAQC,IAAI1C,GACZuB,EAAWvB,GACX+B,EAASyB,IAAI,aAAcxD,KAI3ByD,EAAmB,SAA0BtD,GAC/C,OAAO,WACL8B,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDH,MAAO,MAGT,IAAI6B,EAAajC,EAAW6B,QAAQnD,GAEhCH,EAAMrB,OAAOlB,EAA0K,EAAjLkB,CAAoL8C,IAE1K,IAAhBiC,EACF1D,EAAI7C,KAAKgD,GAETH,EAAIuD,OAAOG,EAAY,GAGzBjB,QAAQC,IAAI1C,GACZ0B,EAAc1B,GACd+B,EAASyB,IAAI,OAAQxD,KAIrB2D,EAAkB,SAAyBX,GAG7C,OAAgB,IAFH1B,EAAQgC,QAAQN,IAS3BY,EAAa,SAAoBzD,GAGnC,OAAgB,IAFHsB,EAAW6B,QAAQnD,IA2C9B0D,EAAe,SAAsBC,GACvC,OAAO,SAAU7D,GACf,IAAI8D,EAGAC,EAAiB,UAATF,EAAmB7D,EAAEb,OAAO6E,MAAM,GAAKhE,EAAEb,OAAO4E,MAC5DjC,EAASyB,IAAIM,EAAME,GACnB/B,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,IAAK+B,EAAiB,GAAIpF,OAAOjB,EAAuK,EAA9KiB,CAAiLoF,EAAgBD,EAAME,GAAQrF,OAAOjB,EAAuK,EAA9KiB,CAAiLoF,EAAgB,WAAYhC,GAAWpD,OAAOjB,EAAuK,EAA9KiB,CAAiLoF,EAAgB,QAAS,IAAKA,OAInsBG,EAAa,SAAoBjE,GACnCa,EAAQb,GACR8B,EAASyB,IAAI,OAAQvD,IAGnBkE,EAAW,SAAkBlE,GAC/BA,EAAEmE,iBACFzF,OAAOP,EAAgE,EAAvEO,CAA0EoD,EAAUG,EAAOvB,EAAO2B,MAAMC,MAAMrC,MAAK,SAAUsC,GACvHA,EAAKX,MACPI,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDH,MAAOW,EAAKX,UAGdI,EAAU9C,EAAcA,EAAc,GAAI6C,GAAS,GAAI,CACrDJ,MAAO,GACPE,QAAS,gBAAiBuC,OAAO7B,EAAKZ,MAAO,gCAG3CjD,OAAOV,EAA2D,EAAlEU,IAA0J,IAAhFA,OAAOV,EAA2D,EAAlEU,GAAuE2F,KAEnJzG,EAAiD0G,EAAEC,QAAQ,UAClD7F,OAAOV,EAA2D,EAAlEU,IAA0J,IAAhFA,OAAOV,EAA2D,EAAlEU,GAAuE2F,MAE1JzG,EAAiD0G,EAAEC,QAAQ,cA2DnE,OAAoB7F,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CACvF8F,UAAW,uBACXC,SAAuB/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CAC3F8F,UAAW,MACXC,SAAU,CAAc/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CAC5F8F,UAAW,WACXC,SAAU,CAtCM/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,OAAQ,CACzFgG,SAAUR,EACVO,SAAU,CAAc/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CAC5F8F,UAAW,aACXC,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CAC7F8F,UAAW,aACXC,SAAU,UACK/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CACtFiG,KAAM,OACNH,UAAW,eACXT,MAAOpC,EACPiD,SAAUhB,EAAa,cAEVlF,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CACpF8F,UAAW,aACXC,SAAuB/F,OAAOnB,EAAoD,IAA3DmB,CAA8DmB,EAAY,CAC/FU,QAASnC,EAAmE,EAC5EyG,QAASzG,EAAmE,EAC5E2F,MAAOnD,EACPkE,YAAa,6BACbF,SAAUX,MAEGvF,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CACpF+F,SAAuB/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,SAAU,CAC7FiG,KAAM,SACNH,UAAW,kBACXC,SAAU,gBAY8B/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CAC9G8F,UAAW,OACXC,SAAU,CAlDI/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CACvF8F,UAAW,sBACXO,MAAO,CACLC,QAASnD,EAAU,GAAK,QAE1B4C,SAAU5C,IAfQnD,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CACvF8F,UAAW,qBACXO,MAAO,CACLC,QAASpD,EAAQ,GAAK,QAExB6C,SAAU7C,OAwDJhB,GAAqBlC,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CAC5FuG,IAAK,GAAGb,OAtTR,wBAsToB,gBAAgBA,OAAO1D,EAAO2B,MAAMC,MACxD4C,IAAKvD,EACLoD,MAAO,CACLI,MAAO,aAGIzG,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CACrF8F,UAAW,WACXC,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CAC3F+F,SAAuB/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CAC3F8F,UAAW,kBACXC,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,CAC1F+F,SAAU,mBACK/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,IAAkBA,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CAC5K8F,UAAW,aACXC,SAAU,kBACK/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,IAAkBA,OAAOnB,EAAqD,KAA5DmB,CAA+D,QAAS,CAC7K8F,UAAW,uBACXC,SAAU,CAAC,wBAAsC/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CACtHkG,SAAUhB,EAAa,SACvBe,KAAM,OACNS,OAAQ,UACRC,QAAQ,YAIC3G,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CACrF+F,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,CAC1F+F,SAAU,eACK/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,IAAkBA,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,CACzKqG,MAAO,CACLO,UAAW,QACXC,UAAW,UAEbd,SA1KD1D,GAAcA,EAAW+B,KAAI,SAAUC,EAAG3D,GAC/C,OAAoBV,OAAOnB,EAAqD,KAA5DmB,CAA+D,KAAM,CACvF8F,UAAW,gBACXC,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CAC7FkG,SAAUzB,EAAaJ,EAAEC,KACzB3B,QAASqC,EAAgBX,EAAEC,KAC3B2B,KAAM,WACNH,UAAW,SACI9F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CACtF8F,UAAW,mBACXC,SAAU1B,EAAEc,SAEbzE,WAgKgBV,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CACrF+F,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,CAC1F+F,SAAU,SACK/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,IAAkBA,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,CACzKqG,MAAO,CACLO,UAAW,QACXC,UAAW,UAEbd,SAnKDvD,GAAQA,EAAK4B,KAAI,SAAU5C,EAAGd,GACnC,OAAoBV,OAAOnB,EAAqD,KAA5DmB,CAA+D,KAAM,CACvF8F,UAAW,gBACXC,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CAC7FkG,SAAUpB,EAAiBtD,EAAE8C,KAC7B3B,QAASsC,EAAWzD,EAAE8C,KACtB2B,KAAM,WACNH,UAAW,SACI9F,OAAOnB,EAAoD,IAA3DmB,CAA8D,QAAS,CACtF8F,UAAW,mBACXC,SAAUvE,EAAE2D,SAEbzE,uBAmKHoG,KACA,SAAUpI,EAAQqI,GAGxBrI,EAAOqI,QAAyB,iBAARC,KAAmBA,KAAKC,SAAW1I,OAAO0I,UAK5DC,KACA,SAAUxI,EAAQqI,EAASnI,IAG1BL,OAAO4I,SAAW5I,OAAO4I,UAAY,IAAI3I,KAAK,CAC7C,qBACA,WACE,OAAOI,EAAoB,YAO/BwI,KACA,SAAU1I,EAAQC,EAAqBC,GAE7C,aACqB,IAAIC,EAAiDD,EAAoB,QAErEyI,EAAqCzI,EAAoB,QAEzD0I,EAA2C1I,EAAoB,QAC/D2I,EAAgE3I,EAAoBO,EAAEmI,GACtFE,EAA6C5I,EAAoB,QAqB7DD,EAAuB,EAdpD,SAAemD,GACb,IAAIiE,EAAWjE,EAAKiE,SAQpB,OAPA/F,OAAOqH,EAA8C,UAArDrH,EAAwD,WACjDA,OAAOwH,EAA2D,EAAlExH,GAEsF,IAAhFA,OAAOwH,EAA2D,EAAlExH,GAAuE2F,MAChF4B,EAAiD3B,EAAEpH,KAAK,KAFxD+I,EAAiD3B,EAAEpH,KAAK,aAIzD,IACiBwB,OAAOnB,EAAoD,IAA3DmB,CAA8DnB,EAAyD,SAAG,CAC5IkH,SAAUA,MAQR0B,KACA,SAAU/I,EAAQC,EAAqBC,GAE7C,aACAA,EAAoB8I,EAAE/I,GACD,IAAIE,EAAiDD,EAAoB,QAErE+I,EAAkD/I,EAAoB,QACtEgJ,EAAsDhJ,EAAoB,QAC1EiJ,EAA2DjJ,EAAoB,QAC1CA,EAAoB,QA+BrDD,EAA6B,QAtB/C,WACT,OAAoBqB,OAAOnB,EAAoD,IAA3DmB,CAA8D2H,EAAiE,EAAG,CACpJ5B,SAAuB/F,OAAOnB,EAAoD,IAA3DmB,CAA8D4H,EAAqE,EAAG,CAC3J7B,SAAuB/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CAC1F8F,UAAW,kBACXC,SAAuB/F,OAAOnB,EAAqD,KAA5DmB,CAA+D,MAAO,CAC3F8F,UAAW,MACXC,SAAU,CAAc/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CAC3F8F,UAAW,sBACXC,SAAuB/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,KAAM,CACzF+F,SAAU,kBAEG/F,OAAOnB,EAAoD,IAA3DmB,CAA8D,MAAO,CACpF8F,UAAW,YACXC,SAAuB/F,OAAOnB,EAAoD,IAA3DmB,CAA8D6H,EAA0E,EAAG,kBAY5K,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/admin/crud/[slug]-043424154fcd59ede3e1.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[17],{\n\n/***/ \"AhMt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"KQm4\");\n/* harmony import */ var _Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"rePB\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"YFqc\");\n/* harmony import */ var next_link__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_link__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"Vvt1\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"iuBY\");\n/* harmony import */ var _actions_category__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"abxw\");\n/* harmony import */ var _actions_tag__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"SMr6\");\n/* harmony import */ var _actions_blog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"zycw\");\n/* harmony import */ var _node_modules_react_quill_dist_quill_snow_css__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"91UR\");\n/* harmony import */ var _node_modules_react_quill_dist_quill_snow_css__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_node_modules_react_quill_dist_quill_snow_css__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _helpers_quill__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"//g3\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"WjD0\");\n/* harmony import */ var form_data__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(form_data__WEBPACK_IMPORTED_MODULE_13__);\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\nvar ReactQuill = next_dynamic__WEBPACK_IMPORTED_MODULE_6___default()(function () {\n  return Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(11), __webpack_require__.e(6), __webpack_require__.e(12)]).then(__webpack_require__.t.bind(null, \"rmP6\", 7));\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [/*require.resolve*/(\"rmP6\")];\n    },\n    modules: [\"react-quill\"]\n  }\n});\n\n\n\nvar API = \"http://localhost:8000\";\n\nvar BlogUpdate = function BlogUpdate(_ref) {\n  var _useState7;\n\n  var router = _ref.router;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(\"\"),\n      body = _useState[0],\n      setBody = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])([]),\n      categories = _useState2[0],\n      setCategories = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])([]),\n      tags = _useState3[0],\n      setTags = _useState3[1];\n\n  var _useState4 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])([]),\n      checked = _useState4[0],\n      setChecked = _useState4[1]; // categories\n\n\n  var _useState5 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])([]),\n      checkedTag = _useState5[0],\n      setCheckedTag = _useState5[1]; // tags\n\n\n  var _useState6 = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])((_useState7 = {\n    title: \"\",\n    error: \"\",\n    success: \"\",\n    formData: new form_data__WEBPACK_IMPORTED_MODULE_13__()\n  }, Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useState7, \"title\", \"\"), Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useState7, \"body\", \"\"), _useState7)),\n      values = _useState6[0],\n      setValues = _useState6[1];\n\n  var error = values.error,\n      success = values.success,\n      formData = values.formData,\n      title = values.title;\n  var token = Object(_actions_auth__WEBPACK_IMPORTED_MODULE_7__[/* getCookie */ \"c\"])(\"token\");\n  Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useEffect\"])(function () {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      formData: new form_data__WEBPACK_IMPORTED_MODULE_13__()\n    }));\n    initBlog();\n    initCategories();\n    initTags();\n  }, [router]);\n\n  var initBlog = function initBlog() {\n    if (router.query.slug) {\n      Object(_actions_blog__WEBPACK_IMPORTED_MODULE_10__[/* singleBlog */ \"f\"])(router.query.slug).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            title: data.title\n          }));\n          setBody(data.body);\n          setCategoriesArray(data.categories);\n          setTagsArray(data.tags);\n        }\n      });\n    }\n  };\n\n  var setCategoriesArray = function setCategoriesArray(blogCategories) {\n    var ca = [];\n    blogCategories.map(function (c, i) {\n      ca.push(c._id);\n    });\n    setChecked(ca);\n  };\n\n  var setTagsArray = function setTagsArray(blogTags) {\n    var ta = [];\n    blogTags.map(function (t, i) {\n      ta.push(t._id);\n    });\n    setCheckedTag(ta);\n  };\n\n  var initCategories = function initCategories() {\n    Object(_actions_category__WEBPACK_IMPORTED_MODULE_8__[/* getCategories */ \"b\"])().then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n\n  var initTags = function initTags() {\n    Object(_actions_tag__WEBPACK_IMPORTED_MODULE_9__[/* getTags */ \"b\"])().then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setTags(data);\n      }\n    });\n  };\n\n  var handleToggle = function handleToggle(c) {\n    return function () {\n      setValues(_objectSpread(_objectSpread({}, values), {}, {\n        error: \"\"\n      })); // return the first index or -1\n\n      var clickedCategory = checked.indexOf(c);\n\n      var all = Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(checked);\n\n      if (clickedCategory === -1) {\n        all.push(c);\n      } else {\n        all.splice(clickedCategory, 1);\n      }\n\n      console.log(all);\n      setChecked(all);\n      formData.set(\"categories\", all);\n    };\n  };\n\n  var handleTagsToggle = function handleTagsToggle(t) {\n    return function () {\n      setValues(_objectSpread(_objectSpread({}, values), {}, {\n        error: \"\"\n      })); // return the first index or -1\n\n      var clickedTag = checkedTag.indexOf(t);\n\n      var all = Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(checkedTag);\n\n      if (clickedTag === -1) {\n        all.push(t);\n      } else {\n        all.splice(clickedTag, 1);\n      }\n\n      console.log(all);\n      setCheckedTag(all);\n      formData.set(\"tags\", all);\n    };\n  };\n\n  var findOutCategory = function findOutCategory(c) {\n    var result = checked.indexOf(c);\n\n    if (result !== -1) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var findOutTag = function findOutTag(t) {\n    var result = checkedTag.indexOf(t);\n\n    if (result !== -1) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var showCategories = function showCategories() {\n    return categories && categories.map(function (c, i) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"li\", {\n        className: \"list-unstyled\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n          onChange: handleToggle(c._id),\n          checked: findOutCategory(c._id),\n          type: \"checkbox\",\n          className: \"mr-2\"\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"label\", {\n          className: \"form-check-label\",\n          children: c.name\n        })]\n      }, i);\n    });\n  };\n\n  var showTags = function showTags() {\n    return tags && tags.map(function (t, i) {\n      return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"li\", {\n        className: \"list-unstyled\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n          onChange: handleTagsToggle(t._id),\n          checked: findOutTag(t._id),\n          type: \"checkbox\",\n          className: \"mr-2\"\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"label\", {\n          className: \"form-check-label\",\n          children: t.name\n        })]\n      }, i);\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      // console.log(e.target.value);\n      var value = name === \"photo\" ? e.target.files[0] : e.target.value;\n      formData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_objectSpread2, name, value), Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_objectSpread2, \"formData\", formData), Object(_Users_chanchalagorale_Documents_react_mongo_next_project_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_objectSpread2, \"error\", \"\"), _objectSpread2)));\n    };\n  };\n\n  var handleBody = function handleBody(e) {\n    setBody(e);\n    formData.set(\"body\", e);\n  };\n\n  var editBlog = function editBlog(e) {\n    e.preventDefault();\n    Object(_actions_blog__WEBPACK_IMPORTED_MODULE_10__[/* updateBlog */ \"g\"])(formData, token, router.query.slug).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          title: \"\",\n          success: \"Blog titled \\\"\".concat(data.title, \"\\\" is successfully updated\")\n        }));\n\n        if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_7__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_7__[/* isAuth */ \"e\"])().role === 1) {\n          // Router.replace(`/admin/crud/${router.query.slug}`);\n          next_router__WEBPACK_IMPORTED_MODULE_5___default.a.replace(\"/admin\");\n        } else if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_7__[/* isAuth */ \"e\"])() && Object(_actions_auth__WEBPACK_IMPORTED_MODULE_7__[/* isAuth */ \"e\"])().role === 0) {\n          // Router.replace(`/user/crud/${router.query.slug}`);\n          next_router__WEBPACK_IMPORTED_MODULE_5___default.a.replace(\"/user\");\n        }\n      }\n    });\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      children: error\n    });\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      children: success\n    });\n  };\n\n  var updateBlogForm = function updateBlogForm() {\n    return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"form\", {\n      onSubmit: editBlog,\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"label\", {\n          className: \"text-muted\",\n          children: \"Title\"\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: title,\n          onChange: handleChange(\"title\")\n        })]\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(ReactQuill, {\n          modules: _helpers_quill__WEBPACK_IMPORTED_MODULE_12__[/* QuillModules */ \"b\"],\n          formats: _helpers_quill__WEBPACK_IMPORTED_MODULE_12__[/* QuillFormats */ \"a\"],\n          value: body,\n          placeholder: \"Write something amazing...\",\n          onChange: handleBody\n        })\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Update\"\n        })\n      })]\n    });\n  };\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n    className: \"container-fluid pb-5\",\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"col-md-8\",\n        children: [updateBlogForm(), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"pt-3\",\n          children: [showSuccess(), showError()]\n        }), body && /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"img\", {\n          src: \"\".concat(API, \"/blog/photo/\").concat(router.query.slug),\n          alt: title,\n          style: {\n            width: \"100%\"\n          }\n        })]\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n        className: \"col-md-4\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n          children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n            className: \"form-group pb-2\",\n            children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h5\", {\n              children: \"Featured image\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"hr\", {}), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"small\", {\n              className: \"text-muted\",\n              children: \"Max size: 1mb\"\n            }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"br\", {}), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"label\", {\n              className: \"btn btn-outline-info\",\n              children: [\"Upload featured image\", /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"input\", {\n                onChange: handleChange(\"photo\"),\n                type: \"file\",\n                accept: \"image/*\",\n                hidden: true\n              })]\n            })]\n          })\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h5\", {\n            children: \"Categories\"\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"hr\", {}), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"ul\", {\n            style: {\n              maxHeight: \"200px\",\n              overflowY: \"scroll\"\n            },\n            children: showCategories()\n          })]\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h5\", {\n            children: \"Tags\"\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"hr\", {}), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"ul\", {\n            style: {\n              maxHeight: \"200px\",\n              overflowY: \"scroll\"\n            },\n            children: showTags()\n          })]\n        })]\n      })]\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(next_router__WEBPACK_IMPORTED_MODULE_5__[\"withRouter\"])(BlogUpdate));\n\n/***/ }),\n\n/***/ \"WjD0\":\n/***/ (function(module, exports) {\n\n/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n\n\n/***/ }),\n\n/***/ \"iT7G\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/admin/crud/[slug]\",\n        function () {\n          return __webpack_require__(\"we8M\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"vC6e\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _actions_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"iuBY\");\n\n\n\n\n\n\nfunction Admin(_ref) {\n  var children = _ref.children;\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    if (!Object(_actions_auth__WEBPACK_IMPORTED_MODULE_3__[/* isAuth */ \"e\"])()) {\n      next_router__WEBPACK_IMPORTED_MODULE_2___default.a.push(\"/signin\");\n    } else if (Object(_actions_auth__WEBPACK_IMPORTED_MODULE_3__[/* isAuth */ \"e\"])().role !== 1) {\n      next_router__WEBPACK_IMPORTED_MODULE_2___default.a.push(\"/\");\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"], {\n    children: children\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Admin);\n\n/***/ }),\n\n/***/ \"we8M\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_Layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"5Yp1\");\n/* harmony import */ var _components_auth_Admin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"vC6e\");\n/* harmony import */ var _components_crud_BlogUpdate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"AhMt\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\n\nvar Blog = function Blog() {\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_Layout__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_auth_Admin__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"col-md-12 pt-5 pb-5\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h2\", {\n              children: \"Update blog\"\n            })\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_crud_BlogUpdate__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {})\n          })]\n        })\n      })\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Blog);\n\n/***/ })\n\n},[[\"iT7G\",1,0,2,3,8,9]]]);","inputSourceMap":{"version":3,"sources":["/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/crud/BlogUpdate.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/form-data/lib/browser.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fadmin%2Fcrud%2F%5Bslug%5D&absolutePagePath=private-next-pages%2Fadmin%2Fcrud%2F%5Bslug%5D.js!","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/components/auth/Admin.js","/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/pages/admin/crud/[slug].js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/chanchalagorale/Documents/react-mongo-next-project/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Link from \"next/link\";\nimport { useState, useEffect } from \"react\";\nimport Router from \"next/router\";\nimport dynamic from \"next/dynamic\";\nimport { withRouter } from \"next/router\";\nimport { getCookie, isAuth } from \"../../actions/auth\";\nimport { getCategories } from \"../../actions/category\";\nimport { getTags } from \"../../actions/tag\";\nimport { singleBlog, updateBlog } from \"../../actions/blog\";\nvar ReactQuill = dynamic(function () {\n  return import(\"react-quill\");\n}, {\n  ssr: false,\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"react-quill\")];\n    },\n    modules: [\"react-quill\"]\n  }\n});\nimport \"../../node_modules/react-quill/dist/quill.snow.css\";\nimport { QuillModules, QuillFormats } from \"../../helpers/quill\";\nimport * as FormData from \"form-data\";\nvar API = \"http://localhost:8000\";\n\nvar BlogUpdate = function BlogUpdate(_ref) {\n  var _useState7;\n\n  var router = _ref.router;\n\n  var _useState = useState(\"\"),\n      body = _useState[0],\n      setBody = _useState[1];\n\n  var _useState2 = useState([]),\n      categories = _useState2[0],\n      setCategories = _useState2[1];\n\n  var _useState3 = useState([]),\n      tags = _useState3[0],\n      setTags = _useState3[1];\n\n  var _useState4 = useState([]),\n      checked = _useState4[0],\n      setChecked = _useState4[1]; // categories\n\n\n  var _useState5 = useState([]),\n      checkedTag = _useState5[0],\n      setCheckedTag = _useState5[1]; // tags\n\n\n  var _useState6 = useState((_useState7 = {\n    title: \"\",\n    error: \"\",\n    success: \"\",\n    formData: new FormData()\n  }, _defineProperty(_useState7, \"title\", \"\"), _defineProperty(_useState7, \"body\", \"\"), _useState7)),\n      values = _useState6[0],\n      setValues = _useState6[1];\n\n  var error = values.error,\n      success = values.success,\n      formData = values.formData,\n      title = values.title;\n  var token = getCookie(\"token\");\n  useEffect(function () {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      formData: new FormData()\n    }));\n    initBlog();\n    initCategories();\n    initTags();\n  }, [router]);\n\n  var initBlog = function initBlog() {\n    if (router.query.slug) {\n      singleBlog(router.query.slug).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        } else {\n          setValues(_objectSpread(_objectSpread({}, values), {}, {\n            title: data.title\n          }));\n          setBody(data.body);\n          setCategoriesArray(data.categories);\n          setTagsArray(data.tags);\n        }\n      });\n    }\n  };\n\n  var setCategoriesArray = function setCategoriesArray(blogCategories) {\n    var ca = [];\n    blogCategories.map(function (c, i) {\n      ca.push(c._id);\n    });\n    setChecked(ca);\n  };\n\n  var setTagsArray = function setTagsArray(blogTags) {\n    var ta = [];\n    blogTags.map(function (t, i) {\n      ta.push(t._id);\n    });\n    setCheckedTag(ta);\n  };\n\n  var initCategories = function initCategories() {\n    getCategories().then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setCategories(data);\n      }\n    });\n  };\n\n  var initTags = function initTags() {\n    getTags().then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setTags(data);\n      }\n    });\n  };\n\n  var handleToggle = function handleToggle(c) {\n    return function () {\n      setValues(_objectSpread(_objectSpread({}, values), {}, {\n        error: \"\"\n      })); // return the first index or -1\n\n      var clickedCategory = checked.indexOf(c);\n\n      var all = _toConsumableArray(checked);\n\n      if (clickedCategory === -1) {\n        all.push(c);\n      } else {\n        all.splice(clickedCategory, 1);\n      }\n\n      console.log(all);\n      setChecked(all);\n      formData.set(\"categories\", all);\n    };\n  };\n\n  var handleTagsToggle = function handleTagsToggle(t) {\n    return function () {\n      setValues(_objectSpread(_objectSpread({}, values), {}, {\n        error: \"\"\n      })); // return the first index or -1\n\n      var clickedTag = checkedTag.indexOf(t);\n\n      var all = _toConsumableArray(checkedTag);\n\n      if (clickedTag === -1) {\n        all.push(t);\n      } else {\n        all.splice(clickedTag, 1);\n      }\n\n      console.log(all);\n      setCheckedTag(all);\n      formData.set(\"tags\", all);\n    };\n  };\n\n  var findOutCategory = function findOutCategory(c) {\n    var result = checked.indexOf(c);\n\n    if (result !== -1) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var findOutTag = function findOutTag(t) {\n    var result = checkedTag.indexOf(t);\n\n    if (result !== -1) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  var showCategories = function showCategories() {\n    return categories && categories.map(function (c, i) {\n      return /*#__PURE__*/_jsxs(\"li\", {\n        className: \"list-unstyled\",\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          onChange: handleToggle(c._id),\n          checked: findOutCategory(c._id),\n          type: \"checkbox\",\n          className: \"mr-2\"\n        }), /*#__PURE__*/_jsx(\"label\", {\n          className: \"form-check-label\",\n          children: c.name\n        })]\n      }, i);\n    });\n  };\n\n  var showTags = function showTags() {\n    return tags && tags.map(function (t, i) {\n      return /*#__PURE__*/_jsxs(\"li\", {\n        className: \"list-unstyled\",\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          onChange: handleTagsToggle(t._id),\n          checked: findOutTag(t._id),\n          type: \"checkbox\",\n          className: \"mr-2\"\n        }), /*#__PURE__*/_jsx(\"label\", {\n          className: \"form-check-label\",\n          children: t.name\n        })]\n      }, i);\n    });\n  };\n\n  var handleChange = function handleChange(name) {\n    return function (e) {\n      var _objectSpread2;\n\n      // console.log(e.target.value);\n      var value = name === \"photo\" ? e.target.files[0] : e.target.value;\n      formData.set(name, value);\n      setValues(_objectSpread(_objectSpread({}, values), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, name, value), _defineProperty(_objectSpread2, \"formData\", formData), _defineProperty(_objectSpread2, \"error\", \"\"), _objectSpread2)));\n    };\n  };\n\n  var handleBody = function handleBody(e) {\n    setBody(e);\n    formData.set(\"body\", e);\n  };\n\n  var editBlog = function editBlog(e) {\n    e.preventDefault();\n    updateBlog(formData, token, router.query.slug).then(function (data) {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error\n        }));\n      } else {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          title: \"\",\n          success: \"Blog titled \\\"\".concat(data.title, \"\\\" is successfully updated\")\n        }));\n\n        if (isAuth() && isAuth().role === 1) {\n          // Router.replace(`/admin/crud/${router.query.slug}`);\n          Router.replace(\"/admin\");\n        } else if (isAuth() && isAuth().role === 0) {\n          // Router.replace(`/user/crud/${router.query.slug}`);\n          Router.replace(\"/user\");\n        }\n      }\n    });\n  };\n\n  var showError = function showError() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      children: error\n    });\n  };\n\n  var showSuccess = function showSuccess() {\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      children: success\n    });\n  };\n\n  var updateBlogForm = function updateBlogForm() {\n    return /*#__PURE__*/_jsxs(\"form\", {\n      onSubmit: editBlog,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          className: \"text-muted\",\n          children: \"Title\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: title,\n          onChange: handleChange(\"title\")\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsx(ReactQuill, {\n          modules: QuillModules,\n          formats: QuillFormats,\n          value: body,\n          placeholder: \"Write something amazing...\",\n          onChange: handleBody\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Update\"\n        })\n      })]\n    });\n  };\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"container-fluid pb-5\",\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-md-8\",\n        children: [updateBlogForm(), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"pt-3\",\n          children: [showSuccess(), showError()]\n        }), body && /*#__PURE__*/_jsx(\"img\", {\n          src: \"\".concat(API, \"/blog/photo/\").concat(router.query.slug),\n          alt: title,\n          style: {\n            width: \"100%\"\n          }\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"col-md-4\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"form-group pb-2\",\n            children: [/*#__PURE__*/_jsx(\"h5\", {\n              children: \"Featured image\"\n            }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"small\", {\n              className: \"text-muted\",\n              children: \"Max size: 1mb\"\n            }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n              className: \"btn btn-outline-info\",\n              children: [\"Upload featured image\", /*#__PURE__*/_jsx(\"input\", {\n                onChange: handleChange(\"photo\"),\n                type: \"file\",\n                accept: \"image/*\",\n                hidden: true\n              })]\n            })]\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(\"h5\", {\n            children: \"Categories\"\n          }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"ul\", {\n            style: {\n              maxHeight: \"200px\",\n              overflowY: \"scroll\"\n            },\n            children: showCategories()\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(\"h5\", {\n            children: \"Tags\"\n          }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"ul\", {\n            style: {\n              maxHeight: \"200px\",\n              overflowY: \"scroll\"\n            },\n            children: showTags()\n          })]\n        })]\n      })]\n    })\n  });\n};\n\nexport default withRouter(BlogUpdate);","/* eslint-env browser */\nmodule.exports = typeof self == 'object' ? self.FormData : window.FormData;\n","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/admin/crud/[slug]\",\n        function () {\n          return require(\"private-next-pages/admin/crud/[slug].js\");\n        }\n      ]);\n    ","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport React, { useEffect } from \"react\";\nimport Router from \"next/router\";\nimport { isAuth } from \"../../actions/auth\";\n\nfunction Admin(_ref) {\n  var children = _ref.children;\n  useEffect(function () {\n    if (!isAuth()) {\n      Router.push(\"/signin\");\n    } else if (isAuth().role !== 1) {\n      Router.push(\"/\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n}\n\nexport default Admin;","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Layout from \"../../../components/Layout\";\nimport Admin from \"../../../components/auth/Admin\";\nimport BlogUpdate from \"../../../components/crud/BlogUpdate\";\nimport React from 'react';\n\nvar Blog = function Blog() {\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Admin, {\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"container-fluid\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-12 pt-5 pb-5\",\n            children: /*#__PURE__*/_jsx(\"h2\", {\n              children: \"Update blog\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"col-md-12\",\n            children: /*#__PURE__*/_jsx(BlogUpdate, {})\n          })]\n        })\n      })\n    })\n  });\n};\n\nexport default Blog;"]}}